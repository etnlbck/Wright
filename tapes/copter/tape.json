{
  "name":"Copter",
  "author":"KesieV",
  "year":2017,
  "genre":"Shooter",
  "description":"<p>When I asked Bianca which games she played in her youth, she described me a game she played with her cousin on a SEGA Master System which, featured an helicopter saving people.</p><p>As long time C64 player, I immediately recognized Broderbund <a href='https://en.wikipedia.org/wiki/Choplifter'>Choplifter</a> (1982) but when I displayed her some screenshots, she surprisingly said that the game she played wasn't that at all. That left me mildy troubled for the days following: I took the opportunity and decided to add the game to the Wright! TODO list in order to investigate further the case.</p><p>Time passed and, just before coding my own version as usual, I discovered the game interesting story: it falls in the early movie-like videogames experiments, with fluid animations, smooth camera and a story inspired by war movies. It was originally thought to be so realistic by its original author, Dan Gorlin, that Broderbund helped him to make it simplier and more playable.</p><p>But, together with its past, the truth behind its conversions unfolded and surprised me: Choplifter was born as home computer videogame on Apple II, then ported on other home systems as it used to be - including the C64 conversion I used to play. Then, 3 years later, it has been ported on arcades (?) and improved by SEGA... which ported it back to its home console, the SEGA Master System - the version Bianca and her cousin played. Well... a quite unusual conversion chain and facelift!</p><p>The Rare beat'em up <a href='https://en.wikipedia.org/wiki/Battletoads'>Battletoads</a> (1991) is another example of a home videogame being ported to arcades and, in some way, in a more weird fashion.</p><p>One of the most famous and appreciated sidescroller beat'em up of the past was the <a href='https://en.wikipedia.org/wiki/Teenage_Mutant_Ninja_Turtles_(arcade_game)'>Teenage Mutant Ninja Turtles</a> (1989) arcade game for sure. It featured pretty large and nicely animated sprites, a slick gameplay and everything, from graphics to musics and effects, managed to catch the original animation series funny mood.</p><p>The resemblance of Battletoads characters with the ninja turtles wasn't by chance: the game was born in order to ride the wave of interest around the TMNT. The final result was so stunning that it deserved a place in history: as home-exclusive beat'em up, it was a fantastic one, with charming characters, animations and a fine and various gameplay. Its success lead the game to more sequels and crossovers, culminating with its arcade version made in 1994 - the home of his long-time competitor - which sales were so mediocre that settled the last installment of the game.</p><p>As time passes, we change so much we can't recognize ourselves and our goals, as it happened to Choplifter and Battletoads. Well, <i>c'est la vie</i>.</p><p>Plot!</p><p>You are the only hope of our prisoners of war! Find them with your trusty helicopter, shoot down their jails and get them safely to the base! But be careful! Your enemies are going to stop you... at any cost!</p><p>Use LEFT/RIGHT for moving your helicopter. Use the A BUTTON for firing and the B BUTTON for changing your helicopter side. Break the POW jails with your gun and then land nearby to get them on board - just don't squish them when landing! When your helicopter is full - or things are getting too hot - take off and bring them back to the base, landing on the helipad. Good luck!</p>",
  "screenshots":[ "copter-1.png", "copter-2.png" ],
  "hardware":{
    "width":256,
    "height":192,
    "filter":"retro"
  },
  "cheats":{
    "unlimitedLives":"Unlimited lives (no hi-score, sorry!)"
  },
  "resources":{
    "spectrum":"spectrum.font",
    "sprites":"sprites.png",
    "title":"title.png",
    "defaultsprites":"../default/sprites.png"
  },
  "stencils":{
    "codeCloud":{
      "times":20,
      "object":{ "_":[ "stencil", "smoke" ] },
      "execute":[
        { "sum":{ "_":[ "randomNumber", [ { "_":[ "this", "width", "/", -2 ] }, { "_":[ "this", "width", "/", 2 ] } ] ] }, "to":{ "_":[ "that", "x" ] } },
        { "sum":{ "_":[ "randomNumber", [ { "_":[ "this", "height", "/", -2 ] }, { "_":[ "this", "height", "/", 2 ] } ] ] }, "to":{ "_":[ "that", "y" ] } }
      ]
    },
    "codeEndGame":{ "as":{ "_":[ "object", "freezeOnEndgame" ] }, "set":{ "follow":0, "animation":"none", "state":"frozen" } },
    "codeEnemyBullet":{
      "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "killedByEnemyBullets" ] } ] },
      "execute":[ { "as":{ "_":"that" }, "executeAction":"hit" }, { "execute":{ "_":[ "stencil", "removeWithSmoke" ] } } ]
    },
    "codeUpdateDifficulty":{ "as":{ "_":"variable" }, "set":{ "difficulty":{ "_":[ "variable", "difficulty", "limitValue", [ 0, 60 ] ] } } },
    "codeUpdateSide":[
      { "when":{ "_":[ "this", "facing", "isGreaterThan", 0 ] }, "set":{ "flipX":0 }, "elseExecute":{ "set":{ "flipX":1 } } },
      {
        "when":{ "_":[ "this", "facing", "isEqualTo", 1 ] },
        "set":{ "tileX":48, "width":16, "height":16, "hitbox":{ "width":16, "height":16, "x":0, "y":0 } },
        "elseExecute":{ "set":{ "tileX":0, "width":24, "height":16, "hitbox":{ "width":16, "height":16, "x":4, "y":0 } } }
      },
      {
        "when":{ "_":[ "this", "facing", "isEqualTo", 0 ] },
        "set":{ "cameraFocusX":170, "cameraFocusY":0, "cameraFocusWidth":30, "cameraFocusHeight":192 }
      },
      {
        "when":{ "_":[ "this", "facing", "isEqualTo", 1 ] },
        "set":{ "cameraFocusX":62, "cameraFocusY":0, "cameraFocusWidth":128, "cameraFocusHeight":192 }
      },
      { "when":{ "_":[ "this", "facing", "isEqualTo", 2 ] }, "set":{ "cameraFocusX":66, "cameraFocusY":0, "cameraFocusWidth":30, "cameraFocusHeight":192 } }
    ],
    "removeWithCloud":[ { "_":[ "stencil", "codeCloud" ] }, { "remove":1 } ],
    "removeWithSmoke":[ { "object":{ "set":{ "_":[ "stencil", "smoke" ] }, "forceY":-1 } }, { "remove":1 } ],
    "modelPopupLabel":{
      "width":100, "height":10,
      "zIndex":10000, "x":{ "_":[ "this", "xCenteredWith", { "_":"that" } ] }, "y":{ "_":[ "that", "y", "-", 5 ] },
      "color":"#fff",
      "font":"spectrum", "lineHeight":12, "outline":"#000", "textAlign":"center",
      "speed":0.5,
      "states":{
        "code":{
          "name":"Sequence",
          "data":[ { "subtract":{ "_":[ "this", "speed" ] }, "to":{ "_":[ "this", "y" ] }, "wait":1, "loop":1, "cycles":15 }, { "remove":1 } ]
        }
      }
    },
    "modelRemoveWhenFar":{
      "states":{
        "code":{
          "name":"Execute",
          "data":{
            "when":{ "_":[ "objectTyped", "player", "and", { "_":[ "objectTyped", "player", "distanceTo", { "_":"this" }, "isGreaterThan", 300 ] } ] },
            "remove":1
          }
        }
      }
    },
    "modelEnemy":{
      "type":[ "enemy", "freezeOnEndgame" ],
      "set":{ "_":[ "stencil", "modelRemoveWhenFar" ] },
      "zIndex":15,
      "states":{
        "code":{
          "name":"Execute",
          "data":{ "when":{ "_":[ "this", "collidesWith", { "_":[ "objectTyped", "killedByEnemies" ] } ] }, "as":{ "_":"that" }, "executeAction":"hit" }
        },
        "actions":{
          "name":"hit",
          "execute":[
            { "subtract":1, "to":{ "_":[ "this", "health" ] } },
            { "when":{ "_":[ "this", "health", "isLessEqualThan", 0 ] }, "execute":{ "_":[ "stencil", "removeWithCloud" ] } }
          ]
        }
      }
    },
    "modelEnemyBullet":{
      "type":[ "killedByPlayerHorizontal", "killedByPlayerVertical" ],
      "set":{ "_":[ "stencil", "modelRemoveWhenFar" ] },
      "image":"sprites", "tileX":84, "tileY":8, "width":4, "height":4,
      "zIndex":13,
      "states":{ "actions":{ "name":"hit", "execute":{ "_":[ "stencil", "removeWithSmoke" ] } } }
    },
    "playerBullet":{
      "set":{ "_":[ "stencil", "modelRemoveWhenFar" ] },
      "image":"sprites", "tileX":80, "tileY":8, "width":4, "height":4,
      "zIndex":13,
      "execute":[
        { "set":{ "x":{ "_":[ "this", "xCenteredWith", { "_":"that" } ] }, "y":{ "_":[ "this", "yCenteredWith", { "_":"that" } ] } } },
        {
          "when":{ "_":[ "that", "facing", "isEqualTo", 0 ] },
          "set":{ "depth":160, "hits":"killedByPlayerHorizontal" },
          "applyVector":{ "angle":{ "_":[ 270, "-", { "_":[ "that", "angle" ] } ] }, "length":6 }
        },
        {
          "when":{ "_":[ "that", "facing", "isEqualTo", 1 ] },
          "set":{ "depth":184, "hits":"killedByPlayerVertical" },
          "applyVector":{ "angle":{ "_":[ "that", "angle", "+", 180 ] }, "length":6 }
        },
        {
          "when":{ "_":[ "that", "facing", "isEqualTo", 2 ] },
          "set":{ "depth":160, "hits":"killedByPlayerHorizontal" },
          "applyVector":{ "angle":{ "_":[ "that", "angle", "+", 90 ] }, "length":6 }
        }
      ],
      "life":256,
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":[
              { "when":{ "_":[ "this", "life" ] }, "subtract":1, "to":{ "_":[ "this", "life" ] }, "elseExecute":{ "_":[ "stencil", "removeWithCloud" ] } },
              { "when":{ "_":[ "this", "y", "isGreaterThan", { "_":[ "this", "depth" ] } ] }, "execute":{ "_":[ "stencil", "removeWithSmoke" ] } },
              {
                "when":{ "_":[ "this", "collidesWith", { "_":[ "object", { "_":[ "this", "hits" ] } ] } ] },
                "execute":[ { "as":{ "_":"that" }, "executeAction":"hit" }, { "execute":{ "_":[ "stencil", "removeWithSmoke" ] } } ]
              }
            ]
          },
          { "name":"Physics" }
        ]
      }
    },
    "player":{
      "type":"freezeOnEndgame",
      "follow":1,
      "image":"sprites", "width":24, "height":16,
      "zIndex":15, "x":2485, "y":146,
      "flipX":1,
      "forceX":0, "forceY":0,
      "animations":{ "fly":{ "frames":2, "speed":0, "loopTo":0 }, "land":{ "frames":2, "speed":3, "loopTo":0 } },
      "animation":"fly",
      "facing":0,
      "states":[
        {
          "set":{ "type":[ "player", "killedByEnemyBullets", "killedByHouses", "killedByEnemies" ], "cameraSmoothness":0.1, "visible":1, "safeDrop":0 },
          "execute":{ "_":[ "stencil", "codeUpdateSide" ] },
          "code":{
            "name":"Execute",
            "data":{
              "when":{ "_":[ "this", "y", "isLessThan", 146 ] },
              "execute":[
                { "when":{ "_":[ "keyA", "isHit" ] }, "execute":{ "object":{ "_":[ "stencil", "playerBullet" ] } } },
                {
                  "when":{ "_":[ "keyB", "isHit" ] },
                  "execute":[
                    {
                      "when":{ "_":[ "this", "facing", "isNotEqualTo", 1 ] },
                      "set":{ "facing":1, "reset":1 },
                      "elseExecute":{ "when":{ "_":[ "keyRight", "isDown" ] }, "set":{ "facing":2 }, "elseExecute":{ "set":{ "facing":0 } } }
                    },
                    { "_":[ "stencil", "codeUpdateSide" ] }
                  ]
                },
                {
                  "when":{ "_":[ "keyLeft", "isDown" ] },
                  "set":{ "forceX":{ "_":[ "this", "forceX", "-", 1, "limitValue", [ -3, 3 ] ] } },
                  "elseExecute":{
                    "when":{ "_":[ "keyRight", "isDown" ] },
                    "set":{ "forceX":{ "_":[ "this", "forceX", "+", 1, "limitValue", [ -3, 3 ] ] } },
                    "elseExecute":{
                      "when":{ "_":[ "this", "forceX", "abs", "isLessEqualThan", 1 ] },
                      "set":{ "forceX":0 },
                      "elseExecute":{
                        "when":{ "_":[ "this", "forceX", "isGreaterThan", 1 ] },
                        "subtract":1,
                        "to":{ "_":[ "this", "forceX" ] },
                        "elseExecute":{ "sum":1, "to":{ "_":[ "this", "forceX" ] } }
                      }
                    }
                  }
                },
                {
                  "when":{ "_":[ "keyUp", "isDown" ] },
                  "set":{ "forceY":{ "_":[ "this", "forceY", "-", 1, "limitValue", [ -3, 3 ] ] } },
                  "elseExecute":{
                    "when":{ "_":[ "keyDown", "isDown" ] },
                    "set":{ "forceY":{ "_":[ "this", "forceY", "+", 1, "limitValue", [ -3, 3 ] ] } },
                    "elseExecute":{
                      "when":{ "_":[ "this", "forceY", "abs", "isLessEqualThan", 1 ] },
                      "set":{ "forceY":0 },
                      "elseExecute":{
                        "when":{ "_":[ "this", "forceY", "isGreaterThan", 1 ] },
                        "subtract":1,
                        "to":{ "_":[ "this", "forceY" ] },
                        "elseExecute":{ "sum":1, "to":{ "_":[ "this", "forceY" ] } }
                      }
                    }
                  }
                },
                {
                  "set":{
                    "x":{ "_":[ "this", "x", "+", { "_":[ "this", "forceX" ] }, "limitValue", [ 0, 2536 ] ] }, "y":{ "_":[ "this", "y", "+", { "_":[ "this", "forceY" ] }, "limitValue", [ 38, 192 ] ] },
                    "landed":0
                  }
                },
                {
                  "when":{ "_":[ "this", "facing", "isGreaterThan", 0 ] },
                  "set":{ "angle":{ "_":[ "this", "forceX", "*", 6 ] } },
                  "elseExecute":{ "set":{ "angle":{ "_":[ "this", "forceX", "*", -6 ] } } }
                }
              ],
              "elseExecute":[
                { "when":{ "_":[ "this", "landed", "not" ] }, "as":{ "_":"variable" }, "set":{ "combo":0 } },
                { "set":{ "y":146, "angle":0, "forceX":0, "forceY":0, "animation":"land", "landed":1 } },
                {
                  "when":{ "_":[ "this", "safeDrop" ] },
                  "subtract":1,
                  "to":{ "_":[ "this", "safeDrop" ] },
                  "elseExecute":{
                    "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "landingpad" ] }, "and", { "_":[ "variable", "board" ] } ] },
                    "execute":[
                      { "sum":1, "to":{ "_":[ "variable", "combo" ] } },
                      { "sum":{ "_":[ "variable", "combo", "*", 10 ] }, "to":{ "_":[ "variable", "score" ] } },
                      { "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":{ "_":[ "variable", "combo", "*", 10 ] } } },
                      { "subtract":1, "to":{ "_":[ "variable", "board" ] } },
                      { "object":{ "set":{ "_":[ "stencil", "hostage" ] }, "x":{ "_":[ "that", "x", "+", 8 ] }, "y":{ "_":[ "that", "y", "+", 8 ] }, "state":"safe" } },
                      { "set":{ "safeDrop":25 } }
                    ]
                  }
                },
                { "when":{ "_":[ "keyUp", "isDown" ] }, "subtract":1, "to":{ "_":[ "this", "y" ] }, "set":{ "animation":"fly" } }
              ]
            }
          },
          "actions":{ "name":"hit", "set":{ "state":"killed" } }
        },
        {
          "name":"killed",
          "set":{ "removeType":[ "player", "killedByEnemyBullets", "killedByHouses", "killedByEnemies" ], "visible":0 },
          "code":{
            "name":"Sequence",
            "data":[
              { "when":{ "_":[ "cheat", "unlimitedLives", "not" ] }, "subtract":1, "to":{ "_":[ "variable", "lives" ] } },
              { "sum":{ "_":[ "variable", "board" ] }, "to":{ "_":[ "variable", "lost" ] } },
              { "sum":{ "_":[ "variable", "board" ] }, "to":{ "_":[ "variable", "total" ] } },
              { "sum":{ "_":[ "variable", "board" ] }, "to":{ "_":[ "variable", "difficulty" ] } },
              { "_":[ "stencil", "codeUpdateDifficulty" ] },
              { "as":{ "_":"variable" }, "set":{ "board":0 } },
              { "_":[ "stencil", "codeCloud" ] },
              { "wait":25 },
              {
                "when":{ "_":[ "variable", "lives", "not" ] },
                "execute":[ { "as":{ "_":"scene" }, "set":{ "state":"gameover" } }, { "remove":1 } ],
                "elseExecute":{
                  "subsequence":[
                    { "as":{ "_":[ "object", "enemy" ] }, "remove":1 },
                    { "set":{ "tileX":0, "width":24, "cameraSmoothness":1, "x":2482, "y":146, "flipX":1, "forceX":0, "forceY":0, "animation":"land", "facing":0 } },
                    { "wait":2 },
                    { "set":{ "state":"default" } }
                  ]
                }
              }
            ]
          }
        }
      ]
    },
    "base":{
      "type":"base",
      "image":"sprites", "tileX":112, "width":32, "height":32,
      "zIndex":4, "x":2512, "y":129,
      "hitbox":{ "width":8, "height":8, "x":12, "y":24 }
    },
    "hostage":{
      "type":[ "freezeOnEndgame", "killedByPlayerHorizontal", "killedByEnemyBullets" ],
      "image":"sprites", "tileX":88, "tileY":8, "width":8, "height":8,
      "zIndex":6,
      "speed":1,
      "animations":{ "still":{ "frame":0 }, "walk":{ "frames":[ 0, 1 ], "loopTo":0 } },
      "animation":"still",
      "states":[
        {
          "code":[
            {
              "name":"Sequence",
              "data":[
                {
                  "when":{ "_":[ "this", "distanceTo", { "_":[ "objectTyped", "player" ] }, "isLessThan", 100 ] },
                  "execute":[
                    {
                      "when":{ "_":[ "this", "x", "isLessThan", { "_":[ "objectTyped", "player", "x", "+", 8 ] } ] },
                      "set":{ "flipX":0 },
                      "elseExecute":{ "set":{ "flipX":1 } }
                    },
                    { "set":{ "length":{ "_":[ "this", "x", "-", { "_":[ "objectTyped", "player", "x" ] }, "abs", "+", 24 ] } } }
                  ],
                  "elseExecute":{ "set":{ "flipX":{ "_":[ "randomValue", [ 0, 1 ] ] }, "length":{ "_":[ "randomNumber", [ 25, 50 ] ] }, "animation":"walk" } }
                },
                { "set":{ "animation":"walk" } },
                { "when":{ "_":[ "this", "flipX" ] }, "subtract":1, "to":{ "_":[ "this", "x" ] }, "elseExecute":{ "sum":1, "to":{ "_":[ "this", "x" ] } } },
                { "set":{ "x":{ "_":[ "this", "x", "limitValue", [ 0, 2552 ] ] } } },
                { "wait":1, "cycles":{ "_":[ "randomNumber", [ 25, 50 ] ] }, "loopTo":-2 },
                { "set":{ "animation":"still" } },
                { "wait":{ "_":[ "randomNumber", [ 25, 50 ] ] }, "loopTo":0 }
              ]
            },
            {
              "name":"Execute",
              "data":{
                "when":{ "_":[ "this", "collidesWith", { "_":[ "objectTyped", "player" ] } ] },
                "execute":{
                  "when":{ "_":[ "that", "landed", "and", { "_":[ "variable", "board", "isLessThan", 15 ] } ] },
                  "execute":[
                    { "sum":1, "to":{ "_":[ "variable", "combo" ] } },
                    { "sum":{ "_":[ "variable", "combo", "*", 5 ] }, "to":{ "_":[ "variable", "score" ] } },
                    { "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":{ "_":[ "variable", "combo", "*", 5 ] } } },
                    { "sum":1, "to":{ "_":[ "variable", "board" ] } },
                    { "remove":1 }
                  ],
                  "elseExecute":{
                    "when":{ "_":[ "that", "forceX", "or", { "_":[ "that", "forceY", "isGreaterThan", 0 ] } ] },
                    "execute":[ { "as":{ "_":"variable" }, "set":{ "combo":0 } }, { "executeAction":"die" } ]
                  }
                }
              }
            }
          ],
          "actions":[
            { "name":"hit", "execute":{ "executeAction":"die" } },
            {
              "name":"die",
              "execute":[
                { "sum":1, "to":{ "_":[ "variable", "lost" ] } },
                { "sum":1, "to":{ "_":[ "variable", "total" ] } },
                { "sum":1, "to":{ "_":[ "variable", "difficulty" ] } },
                { "_":[ "stencil", "codeUpdateDifficulty" ] },
                { "_":[ "stencil", "removeWithSmoke" ] }
              ]
            }
          ]
        },
        {
          "name":"safe",
          "set":{ "animation":"walk" },
          "code":{
            "name":"Execute",
            "data":[
              { "sum":1, "to":{ "_":[ "this", "x" ] } },
              {
                "when":{ "_":[ "this", "collidesWith", { "_":[ "objectTyped", "base" ] } ] },
                "execute":[
                  { "remove":1 },
                  { "sum":1, "to":{ "_":[ "variable", "safe" ] } },
                  { "sum":1, "to":{ "_":[ "variable", "total" ] } },
                  { "sum":1, "to":{ "_":[ "variable", "difficulty" ] } },
                  { "_":[ "stencil", "codeUpdateDifficulty" ] }
                ]
              }
            ]
          }
        }
      ]
    },
    "hostileHouseBehaviour":{
      "code":{
        "name":"Execute",
        "data":{ "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "killedByHouses" ] } ] }, "as":{ "_":"that" }, "executeAction":"hit" }
      }
    },
    "house":{
      "type":[ "freezeOnEndgame", "killedByPlayerHorizontal" ],
      "image":"sprites", "tileY":16, "width":24, "height":16,
      "zIndex":5, "y":146,
      "animations":{ "burning":{ "frames":[ 1, 2 ], "loopTo":0 }, "normal":{ "frame":0 } },
      "animation":"normal",
      "health":5,
      "hostages":15,
      "states":[
        {
          "like":{ "_":[ "stencil", "hostileHouseBehaviour" ] },
          "actions":{
            "name":"hit",
            "execute":[
              { "subtract":1, "to":{ "_":[ "this", "health" ] } },
              { "when":{ "_":[ "this", "health", "isLessEqualThan", 0 ] }, "execute":[ { "_":[ "stencil", "codeCloud" ] }, { "set":{ "state":"broken" } } ] }
            ]
          }
        },
        {
          "name":"broken",
          "like":{ "_":[ "stencil", "hostileHouseBehaviour" ] },
          "set":{ "removeType":"killedByPlayerHorizontal", "animation":"burning" },
          "code":{
            "name":"Sequence",
            "data":[
              { "when":{ "_":[ "this", "hostages", "not" ] }, "set":{ "state":"empty" } },
              { "wait":25 },
              { "object":{ "set":{ "_":[ "stencil", "hostage" ] }, "x":{ "_":[ "that", "x", "+", 8 ] }, "y":{ "_":[ "that", "y", "+", 8 ] } } },
              { "subtract":1, "to":{ "_":[ "this", "hostages" ] } },
              { "loopTo":0 }
            ]
          }
        }
      ]
    },
    "introDecoration":{
      "image":"sprites", "width":24, "height":16,
      "x":2485,
      "animations":{ "fly":{ "frames":2, "speed":0, "loopTo":0 } },
      "animation":"fly",
      "timer":0,
      "states":{
        "code":{
          "name":"Execute",
          "data":[
            { "sum":0.1, "to":{ "_":[ "this", "timer" ] } },
            { "set":{ "y":{ "_":[ "this", "timer", "sin", "*", 5, "+", 140 ] }, "angle":{ "_":[ "this", "timer", "sin", "*", 8 ] } } }
          ]
        }
      }
    },
    "landingpad":{
      "type":"landingpad",
      "image":"sprites", "tileX":80, "width":32, "height":8,
      "zIndex":4, "x":2480, "y":156,
      "hitbox":{ "width":8, "height":8, "x":12, "y":0 }
    },
    "jet":{
      "type":[ "jet", "killedByPlayerVertical", "killedByPlayerHorizontal" ],
      "set":{ "_":[ "stencil", "modelEnemy" ] },
      "image":"sprites", "tileX":64, "tileY":32, "width":16, "height":16,
      "execute":[
        {
          "when":{ "_":[ "randomValue", [ 0, 1 ] ] },
          "set":{ "x":{ "_":[ "scene", "x", "*", -1, "-", 20 ] }, "forceX":10, "direction":-0.5 },
          "elseExecute":{ "set":{ "x":{ "_":[ "scene", "x", "*", -1, "+", 261 ] }, "flipX":1, "forceX":-10, "direction":0.5 } }
        },
        { "when":{ "_":[ "randomValue", [ 0, 1 ] ] }, "set":{ "y":42, "forceY":2 }, "elseExecute":{ "set":{ "y":132, "forceY":-2 } } },
        { "when":{ "_":[ "randomValue", [ 0, 1 ] ] }, "set":{ "forceX":{ "_":[ "this", "forceX", "/", 2 ] }, "direction":0 } }
      ],
      "health":1,
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":[
              { "sum":{ "_":[ "this", "forceX" ] }, "to":{ "_":[ "this", "x" ] } },
              { "sum":{ "_":[ "this", "forceY" ] }, "to":{ "_":[ "this", "y" ] } },
              { "sum":{ "_":[ "this", "direction" ] }, "to":{ "_":[ "this", "forceX" ] } },
              { "when":{ "_":[ "this", "y", "isGreaterThan", 110 ] }, "set":{ "y":110 } },
              { "when":{ "_":[ "this", "forceX", "not" ] }, "set":{ "flipX":{ "_":[ "this", "flipX", "not" ] } } }
            ]
          },
          {
            "name":"Sequence",
            "data":[ { "wait":{ "_":[ "randomNumber", [ 10, 20 ] ] } }, { "when":{ "_":[ "objectTyped", "player" ] }, "object":{ "_":[ "stencil", "jetBullet" ] } } ]
          }
        ]
      }
    },
    "mine":{
      "type":[ "mine", "killedByPlayerVertical", "killedByPlayerHorizontal" ],
      "set":{ "_":[ "stencil", "modelEnemy" ] },
      "image":"sprites", "tileX":80, "tileY":32, "width":16, "height":16,
      "y":{ "_":[ "randomNumber", [ 40, 114 ] ] },
      "execute":{
        "when":{ "_":[ "objectTyped", "player", "facing" ] },
        "set":{ "x":{ "_":[ "scene", "x", "*", -1, "+", 261 ] } },
        "elseExecute":{ "set":{ "x":{ "_":[ "scene", "x", "*", -1, "-", 20 ] } } }
      },
      "animations":{ "moving":{ "frames":2, "speed":1, "loopTo":0 } },
      "animation":"moving",
      "health":1,
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":{
              "when":{ "_":[ "objectTyped", "player" ] },
              "applyVector":{ "toward":{ "_":[ "objectTyped", "player" ] }, "length":1 },
              "elseExecute":{ "set":{ "forceX":0, "forceY":0 } }
            }
          },
          { "name":"Physics" }
        ]
      }
    },
    "tank":{
      "type":[ "tank", "killedByPlayerVertical" ],
      "set":{ "_":[ "stencil", "modelEnemy" ] },
      "image":"sprites", "tileY":32, "width":32, "height":16,
      "y":170,
      "flipX":{ "_":[ "randomValue", [ 0, 1 ] ] },
      "execute":{
        "when":{ "_":[ "randomValue", [ 0, 1 ] ] },
        "set":{ "x":{ "_":[ "scene", "x", "*", -1, "-", 30 ] } },
        "elseExecute":{ "set":{ "x":{ "_":[ "scene", "x", "*", -1, "+", 260 ] } } }
      },
      "animations":{ "moving":{ "frames":2, "speed":2, "loopTo":0 }, "still":{ "frame":0 } },
      "animation":"still",
      "health":5,
      "states":{
        "code":[
          {
            "name":"Sequence",
            "data":[
              { "set":{ "animation":"moving", "randomGap":{ "_":[ "randomNumber", [ -30, 30 ] ] } } },
              {
                "when":{ "_":[ "this", "x", "isLessThan", { "_":[ "objectTyped", "player", "x", "+", { "_":[ "this", "randomGap" ] } ] } ] },
                "sum":1,
                "to":{ "_":[ "this", "forceX" ] },
                "elseExecute":{ "subtract":1, "to":{ "_":[ "this", "forceX" ] } }
              },
              { "wait":1, "cycles":{ "_":[ "randomNumber", [ 25, 50 ] ] }, "loopTo":-1 },
              { "set":{ "animation":"still" } },
              { "when":{ "_":[ "this", "forceX", "isGreaterThan", 0 ] }, "subtract":1, "to":{ "_":[ "this", "forceX" ] } },
              { "when":{ "_":[ "this", "forceX", "isLessThan", 0 ] }, "sum":1, "to":{ "_":[ "this", "forceX" ] } },
              { "wait":1, "cycles":{ "_":[ "randomNumber", [ 25, 50 ] ] }, "loopTo":-2 },
              { "loopTo":0 }
            ]
          },
          {
            "name":"Sequence",
            "data":[
              { "when":{ "_":[ "this", "distanceTo", { "_":[ "objectTyped", "player" ] }, "isLessThan", 130 ] }, "object":{ "_":[ "stencil", "tankBullet" ] } },
              { "wait":75, "loopTo":-1 }
            ]
          },
          { "name":"Physics", "data":{ "limitX":[ -1, 1 ] } }
        ]
      }
    },
    "jetBullet":{
      "set":{ "_":[ "stencil", "modelEnemyBullet" ] },
      "x":{ "_":[ "this", "xCenteredWith", { "_":"that" } ] }, "y":{ "_":[ "this", "yCenteredWith", { "_":"that" } ] },
      "execute":{
        "applyVector":{ "angle":{ "_":[ "this", "angleTo", { "_":[ "objectTyped", "player" ] }, "+", { "_":[ "randomNumber", [ -5, 5 ] ] } ] }, "length":2 }
      },
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":[
              { "when":{ "_":[ "this", "y", "isGreaterThan", 160 ] }, "execute":{ "_":[ "stencil", "removeWithSmoke" ] } },
              { "_":[ "stencil", "codeEnemyBullet" ] }
            ]
          },
          { "name":"Physics" }
        ]
      }
    },
    "tankBullet":{
      "set":{ "_":[ "stencil", "modelEnemyBullet" ] },
      "x":{ "_":[ "this", "xCenteredWith", { "_":"that" } ] }, "y":{ "_":[ "this", "yCenteredWith", { "_":"that" } ] },
      "forceY":-7,
      "execute":{
        "set":{
          "forceX":{ "_":[ "objectTyped", "player", "x", "+", 10, "-", { "_":[ "this", "x", "+", 10 ] }, "/", 30, "+", { "_":[ "randomNumber", [ -1, 1 ] ] }, "limitValue", [ -10, 10 ] ] }
        }
      },
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":{
              "when":{ "_":[ "this", "forceY", "isGreaterThan", 0 ] },
              "execute":[
                { "when":{ "_":[ "this", "y", "isGreaterThan", 160 ] }, "execute":{ "_":[ "stencil", "removeWithSmoke" ] } },
                { "_":[ "stencil", "codeEnemyBullet" ] }
              ]
            }
          },
          { "name":"Physics", "data":{ "gravityY":0.5 } }
        ]
      }
    },
    "smoke":{
      "image":"defaultsprites", "tileX":80, "tileY":16, "width":16, "height":16,
      "zIndex":{ "_":[ "that", "zIndex", "+", 1 ] }, "x":{ "_":[ "this", "xCenteredWith", { "_":"that" } ] }, "y":{ "_":[ "this", "yCenteredWith", { "_":"that" } ] },
      "animations":{ "spark":{ "frames":4, "speed":1 } },
      "animation":"spark",
      "states":{ "code":[ { "name":"Physics" }, { "name":"Sequence", "data":[ { "wait":8 }, { "remove":1 } ] } ] }
    },
    "threedee":{
      "zIndex":1,
      "bgcolor":"#000",
      "states":{
        "code":{
          "name":"Execute",
          "data":{
            "set":{
              "x":{ "_":[ "scene", "x", "*", -1, "+", 128, "+", { "_":[ "proportionalValue", { "proportion":[ -256, 0, { "_":[ "this", "prop", "*", -1 ] }, { "_":[ "this", "prop" ] } ], "value":{ "_":[ "scene", "x", "%", 256 ] } } ] } ] }
            }
          }
        }
      }
    }
  },
  "execute":[
    { "when":{ "_":[ "storage", "hiscore", "not" ] }, "as":{ "_":"storage" }, "set":{ "hiscore":0 } },
    { "as":{ "_":"variable" }, "set":{ "hiscore":{ "_":[ "storage", "hiscore" ] } } },
    {
      "object":[
        { "width":256, "height":33, "x":0, "y":0, "bgcolor":"#000" },
        { "image":"sprites", "tileX":112, "tileY":32, "width":16, "height":16, "zIndex":1, "x":8, "y":2 },
        { "image":"sprites", "tileX":128, "tileY":32, "width":16, "height":16, "zIndex":1, "x":72, "y":2 },
        { "image":"sprites", "tileX":144, "tileY":32, "width":16, "height":16, "zIndex":1, "x":136, "y":2 },
        { "image":"sprites", "tileX":48, "tileY":0, "width":16, "height":16, "zIndex":1, "x":200, "y":2 },
        {
          "type":"hud",
          "hudType":"label", "label":"x%number|variable.lost|0|2%",
          "box":"label", "width":40, "height":16,
          "zIndex":1, "x":32, "y":2,
          "font":"spectrum", "lineHeight":16
        },
        {
          "type":"hud",
          "hudType":"label", "label":"x%number|variable.board|0|2%",
          "box":"label", "width":40, "height":16,
          "zIndex":1, "x":96, "y":2,
          "font":"spectrum", "lineHeight":16
        },
        {
          "type":"hud",
          "hudType":"label", "label":"x%number|variable.safe|0|2%",
          "box":"label", "width":40, "height":16,
          "zIndex":1, "x":160, "y":2,
          "font":"spectrum", "lineHeight":16
        },
        {
          "type":"hud",
          "hudType":"label", "label":"x%number|variable.lives%",
          "box":"label", "width":40, "height":16,
          "zIndex":1, "x":224, "y":2,
          "font":"spectrum", "lineHeight":16
        },
        {
          "type":"hud",
          "hudType":"label", "label":"SCORE:%number|variable.score|0|8%&nbsp;&nbsp;HIGH:%number|variable.hiscore|0|8%",
          "box":"label", "width":240, "height":15,
          "zIndex":1, "x":8, "y":18,
          "font":"spectrum", "lineHeight":18
        }
      ],
      "into":{ "_":"hud" }
    }
  ],
  "scenes":{
    "intro":{
      "object":[
        { "image":"title", "width":215, "height":40, "x":20, "y":60 },
        {
          "box":"label", "width":256,
          "zIndex":10000, "x":0, "y":140,
          "color":"#fff",
          "font":"spectrum", "fontSize":20, "lineHeight":20, "outline":"#000", "textAlign":"center", "html":"PRESS START",
          "states":{ "code":{ "name":"Sequence", "data":[ { "set":{ "visible":0 }, "wait":10 }, { "set":{ "visible":1 }, "wait":10, "loopTo":0 } ] } }
        },
        { "set":{ "_":[ "stencil", "introDecoration" ] }, "x":30 },
        { "set":{ "_":[ "stencil", "introDecoration" ] }, "x":202, "flipX":1 }
      ],
      "states":{
        "code":{
          "name":"Execute",
          "data":{
            "when":{ "_":[ "keyA", "isHit" ] },
            "execute":[ { "as":{ "_":"variable" }, "set":{ "difficulty":0, "lives":3, "score":0, "stage":1 } }, { "gotoScene":"game", "withTransition":3 } ]
          }
        }
      }
    },
    "game":{
      "object":[
        { "set":{ "_":[ "stencil", "threedee" ] }, "width":2, "height":2, "y":160, "prop":128 },
        { "set":{ "_":[ "stencil", "threedee" ] }, "width":2, "height":2, "y":162, "prop":150 },
        { "set":{ "_":[ "stencil", "threedee" ] }, "width":3, "height":2, "y":166, "prop":180 },
        { "set":{ "_":[ "stencil", "threedee" ] }, "width":5, "height":3, "y":172, "prop":230 },
        { "set":{ "_":[ "stencil", "threedee" ] }, "width":8, "height":5, "y":187, "prop":320 },
        { "set":{ "_":[ "stencil", "house" ] }, "x":1908 },
        { "set":{ "_":[ "stencil", "house" ] }, "x":1396 },
        { "set":{ "_":[ "stencil", "house" ] }, "x":884 },
        { "set":{ "_":[ "stencil", "house" ] }, "x":372 },
        { "width":2560, "height":1, "x":0, "y":160, "bgcolor":"#7f7f7f" },
        { "width":2560, "height":3, "x":0, "y":162, "bgcolor":"#7f7f7f" },
        { "width":2560, "height":7, "x":0, "y":166, "bgcolor":"#7f7f7f" },
        { "width":2560, "height":15, "x":0, "y":174, "bgcolor":"#7f7f7f" },
        { "width":2560, "height":1, "x":0, "y":190, "bgcolor":"#7f7f7f" },
        {
          "image":"sprites", "tileX":144, "tileY":0, "width":16, "height":16,
          "zIndex":1, "y":60,
          "states":{ "code":{ "name":"Execute", "data":{ "set":{ "x":{ "_":[ "scene", "x", "*", -1, "+", 200 ] } } } } }
        },
        {
          "image":"sprites", "tileX":80, "tileY":16, "width":32, "height":6,
          "zIndex":1, "y":153,
          "states":{ "code":{ "name":"Execute", "data":{ "set":{ "x":{ "_":[ "scene", "x", "-", 256, "-", { "_":[ "scene", "x", "/", 3, "%", 320 ] }, "*", -1 ] } } } } }
        },
        { "set":{ "_":[ "stencil", "player" ] } },
        { "set":{ "_":[ "stencil", "base" ] } },
        { "set":{ "_":[ "stencil", "landingpad" ] } }
      ],
      "width":2560, "height":192,
      "execute":[
        { "as":{ "_":"variable" }, "set":{ "board":0, "combo":0, "lost":0, "safe":0, "total":0 } },
        {
          "times":20,
          "execute":{
            "object":{
              "width":1, "height":1,
              "y":{ "_":[ "randomNumber", [ 50, 150 ] ] },
              "bgcolor":{ "_":[ "randomValue", [ "#fff", "#7f7f7f" ] ] },
              "gapX":{ "_":[ "randomNumber", [ 0, 255 ] ] },
              "ratio":{ "_":[ "randomNumber", [ 5, 10 ] ] },
              "states":{
                "code":{
                  "name":"Execute",
                  "data":{
                    "set":{
                      "x":{ "_":[ "scene", "x", "-", 256, "-", { "_":[ "scene", "x", "+", { "_":[ "this", "gapX" ] }, "/", { "_":[ "this", "ratio" ] }, "%", 256 ] }, "*", -1 ] }
                    }
                  }
                }
              }
            }
          }
        }
      ],
      "states":[
        {
          "code":{
            "name":"Sequence",
            "data":[
              {
                "object":{
                  "type":"message",
                  "width":256, "height":20,
                  "x":0, "y":86,
                  "bgcolor":"#000", "color":"#fff",
                  "font":"spectrum", "textAlign":"center", "html":{ "_":[ "STAGE ", ".", { "_":[ "variable", "stage" ] } ] }
                },
                "into":{ "_":"scenehud" }
              },
              { "wait":25 },
              { "as":{ "_":[ "objectTyped", "message" ] }, "remove":1 },
              { "set":{ "state":"play" } }
            ]
          }
        },
        {
          "name":"play",
          "code":[
            { "name":"Execute", "data":{ "when":{ "_":[ "variable", "total", "isGreaterEqualThan", 60 ] }, "set":{ "state":"done" } } },
            {
              "name":"Sequence",
              "data":[
                { "wait":250 },
                {
                  "when":{ "_":[ "object", "tank", "count", "isLessThan", { "_":[ "variable", "difficulty", "/", 30, "+", 1 ] } ] },
                  "object":{ "_":[ "stencil", "tank" ] }
                },
                { "loopTo":0 }
              ]
            },
            {
              "name":"Sequence",
              "data":[
                { "wait":1, "loop":1, "until":{ "_":[ "variable", "difficulty", "isGreaterEqualThan", 30 ] } },
                { "wait":{ "_":[ 60, "-", { "_":[ "variable", "difficulty" ] }, "*", 10, "+", 150 ] } },
                { "object":{ "_":[ "stencil", "jet" ] } },
                { "loopTo":-2 }
              ]
            },
            {
              "name":"Sequence",
              "data":[
                { "wait":1, "loop":1, "until":{ "_":[ "variable", "difficulty", "isGreaterEqualThan", 40 ] } },
                { "wait":{ "_":[ 60, "-", { "_":[ "variable", "difficulty" ] }, "*", 10, "+", 50 ] } },
                { "object":{ "_":[ "stencil", "mine" ] } },
                { "loopTo":-2 }
              ]
            }
          ]
        },
        {
          "name":"gameover",
          "execute":{ "_":[ "stencil", "codeEndGame" ] },
          "code":{
            "name":"Sequence",
            "data":[
              {
                "object":{
                  "type":"message",
                  "width":256, "height":20,
                  "x":0, "y":76,
                  "bgcolor":"#000", "color":"#fff",
                  "font":"spectrum", "textAlign":"center", "html":"THE END"
                },
                "into":{ "_":"scenehud" }
              },
              { "wait":25 },
              { "publishScore":{ "_":[ "variable", "score" ] } },
              {
                "when":{ "_":[ "cheat", "unlimitedlives", "not" ] },
                "execute":{
                  "when":{ "_":[ "variable", "score", "isGreaterThan", { "_":[ "variable", "hiscore" ] } ] },
                  "execute":[
                    { "as":[ { "_":"storage" }, { "_":"variable" } ], "set":{ "hiscore":{ "_":[ "variable", "score" ] } } },
                    {
                      "subsequence":[
                        {
                          "object":{
                            "type":"message",
                            "width":256, "height":20,
                            "x":0, "y":96,
                            "bgcolor":"#000", "color":"#f00",
                            "font":"spectrum", "textAlign":"center", "html":"NEW HIGH SCORE!"
                          },
                          "into":{ "_":"scenehud" }
                        },
                        { "wait":25 }
                      ]
                    }
                  ]
                }
              },
              { "wait":1, "loop":1, "until":{ "_":[ "keyA", "isHit" ] } },
              { "gotoScene":"intro", "withTransition":3 }
            ]
          }
        },
        {
          "name":"done",
          "execute":{ "_":[ "stencil", "codeEndGame" ] },
          "code":{
            "name":"Sequence",
            "data":[
              {
                "object":{
                  "type":"message",
                  "width":256, "height":20,
                  "x":0, "y":76,
                  "bgcolor":"#000", "color":"#fff",
                  "font":"spectrum", "textAlign":"center", "html":{ "_":[ "STAGE ", ".", { "_":[ "variable", "stage" ] }, ".", " CLEAR" ] }
                },
                "into":{ "_":"scenehud" }
              },
              { "wait":25 },
              { "set":{ "bonus":{ "_":[ "variable", "safe", "*", { "_":[ "variable", "stage" ] }, "*", 10 ] } } },
              { "sum":{ "_":[ "this", "bonus" ] }, "to":{ "_":[ "variable", "score" ] } },
              {
                "object":{
                  "type":"message",
                  "width":256, "height":20,
                  "x":0, "y":96,
                  "bgcolor":"#000", "color":"#fff",
                  "font":"spectrum", "textAlign":"center", "html":{ "_":[ "BONUS ", ".", { "_":[ "variable", "safe" ] }, ".", " X ", ".", { "_":[ "variable", "stage" ] }, ".", "0  = ", ".", { "_":[ "that", "bonus" ] } ] }
                },
                "into":{ "_":"scenehud" }
              },
              { "wait":25 },
              { "wait":1, "loop":1, "until":{ "_":[ "keyA", "isHit" ] } },
              { "sum":1, "to":{ "_":[ "variable", "stage" ] } },
              { "as":{ "_":"variable" }, "set":{ "difficulty":{ "_":[ "variable", "stage", "*", 10 ] } } },
              { "_":[ "stencil", "codeUpdateDifficulty" ] },
              { "gotoScene":"game", "withTransition":3 }
            ]
          }
        }
      ]
    }
  }
}