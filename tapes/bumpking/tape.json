{
  "name":"Bumpking",
  "author":"KesieV",
  "year":2018,
  "genre":"Hack'n'Slash",
  "description":"<p>This is a game.</p><p>It's an RPG experience. Because you've to gain experience, grow up and, at least, feel that you're getting better. You can't live without a relentless sense of improvement, which gives to your life and - more importantly - to your time a meaning. You can accumulate cash too - it won't make you a better player... but it may help you on forgiving yourself for your own misdeeds.</p><p>It's a co-op experience. We help each other on fighting difficulties, sharing the same resources and purpose. But there is an untold nasty competition hidden in its friendly rules: even if you're the man you can't go ahead alone - you've to share what you have with who's left with nothing and make him better than you to win.</p><p>Lady Luck will draw a card and punish or reward your hard work from time to time. But even if you know that there's no god here and every judgment is merely fortuitous, you'll feel that you can influence luck with your actions. You feel the need of someone that rewards your effort.</p><p>And that's why - for who's not giving up - there is an ending, before death. Competition and exploration are charming but that's not enough for you to push to the very end. There is a little prize for you, on the top of the mountain - a tiny recognition to testify your great job.</p><p>It's a roguelike experience. It's different every time but smells like a deja-vu. Every problem is new but you feel that someone already faced it once - somewhere, sometime or in some other life.</p><p>And, as you've already guessed, it's a deadly experience too. You are going to die because it's too difficult, because it's your fault or simply because your time is up. The more you live the more unexpected your dead will be. You can't help it: just do your best of your time alive and go the further than you can.</p><p>It's a game I hope you'll try to play without giving up at the first try and, If you're going to play it with a trusty friend (and I strongly suggest that) don't leave him alone too early.</p><p>Okay, that's enough. Now let's talk about this issue videogame!</p><p>Plot!</p><p>You're a young warrior (or two of them, if you're going to play with a friend) who decided to cross the wild lands of the immortal ghost <i>pumpkin Bumpking</i> and became the strongest and richest warrior of the kingdom. Defeat all the area enemies before Bumpking notices that, dashing through them at the right time!</p><p>Use UP/DOWN/LEFT/RIGHT for moving and the A BUTTON for dashing. Hold down a specific direction before hitting the A BUTTON to change the dash direction. Good luck!</p>",
  "screenshots":[ "bumpking-1.png", "bumpking-2.png" ],
  "hardware":{
    "width":320,
    "height":200,
    "filter":"retro",
    "controls":"twoplayers"
  },
  "audioChannels":{
    "music":{ "volume":1, "looping":1, "samples":[ "ending", "bgm0", "bgm1" ] },
    "sfx":{
      "volume":1,
      "samples":[
        "attack",
        "break",
        "levelup",
        "dead",
        "getxp",
        "dash",
        "respawn",
        "health",
        "hit",
        "gold",
        "time",
        "powerup",
        "powerdown",
        "explosion",
        "bumpking",
        "hurryup"
      ]
    },
    "sfxlow":{ "volume":0.1, "samples":[ "spike" ] }
  },
  "cheats":{
    "unlimitedLives":"Unlimited lives (no hi-score, sorry!)"
  },
  "resources":{
    "bgm0":"bgm0.ogg",
    "bgm1":"bgm1.ogg",
    "commodore":"commodore.font",
    "ending":"wearedemo.ogg",
    "sprites":"sprites.png",
    "tiles":"tiles.png",
    "title":"title.png",
    "attack":{ "attack":0.153, "decay":0.09, "frequency":800, "limit":0.4, "pitch":0.0007, "release":0.2, "sustain":0, "tremoloDepth":0.5, "tremoloFrequency":25, "wave":"whitenoise" },
    "break":{ "attack":0, "decay":0.06, "frequency":65, "limit":0.228, "pitch":-0.002, "release":0.068, "sustain":0.02, "tremoloDepth":0.73, "tremoloFrequency":42, "wave":"square" },
    "bumpking":{ "attack":0.009, "decay":0.3, "frequency":170, "frequencyJump1amount":-0.7, "frequencyJump1onset":0.29, "frequencyJump2amount":0.08, "frequencyJump2onset":0.69, "limit":0.6, "release":0.112, "sustain":0.4, "tremoloDepth":0.14, "tremoloFrequency":25.5, "wave":"square" },
    "dash":{ "attack":0.084, "decay":0.06, "frequency":1495, "limit":0.308, "pitch":0.0001, "release":0.088, "sustain":0.044, "tremoloDepth":0.25, "tremoloFrequency":40, "wave":"whitenoise" },
    "dead":{ "attack":0.009, "decay":0.111, "frequency":50, "limit":0.404, "pitch":0.0012, "release":0.4, "sustain":0.128, "tremoloDepth":0.59, "tremoloFrequency":15, "wave":"square" },
    "explosion":{ "attack":0, "decay":0.111, "frequency":72.5, "limit":0.6, "pitch":0.002, "release":0.152, "sustain":0.4, "tremoloDepth":1, "tremoloFrequency":50, "wave":"square" },
    "getxp":{ "attack":0, "decay":0.105, "frequency":365, "limit":0.564, "pitch":0.0017, "release":0.04, "sustain":0.024, "tremoloDepth":0.4, "tremoloFrequency":42, "wave":"square" },
    "gold":{ "decay":0.153, "frequency":575, "frequencyJump1amount":0.2, "frequencyJump1onset":0.13, "limit":0.2, "release":0.332, "tremoloDepth":0.28, "tremoloFrequency":47.5, "wave":"square" },
    "health":{ "attack":0.006, "decay":0.069, "frequency":260, "limit":0.532, "pitch":0.0016, "release":0.308, "sustain":0.016, "tremoloDepth":0.61, "tremoloFrequency":14.5, "wave":"square" },
    "hit":{ "attack":0, "decay":0.159, "frequency":100, "limit":0.2, "pitch":0, "release":0.244, "sustain":0, "tremoloDepth":0.69, "tremoloFrequency":42.5, "wave":"whitenoise" },
    "hurryup":{ "attack":0.033, "decay":0.09, "frequency":237.5, "limit":0.6, "pitch":0.0009, "release":0.136, "sustain":0.288, "tremoloDepth":0.47, "tremoloFrequency":50, "wave":"square" },
    "levelup":{ "attack":0.03, "decay":0.141, "frequency":170, "limit":0.304, "pitch":0.001, "release":0.144, "sustain":0.18, "tremoloDepth":0.2, "tremoloFrequency":47.5, "wave":"square" },
    "powerdown":{ "attack":0.06, "decay":0.087, "frequency":610, "limit":0.288, "pitch":-0.0013, "release":0.024, "sustain":0.172, "tremoloDepth":0.3, "tremoloFrequency":37, "wave":"triangle" },
    "powerup":{ "attack":0.06, "decay":0.087, "frequency":610, "limit":0.288, "pitch":0.0013, "release":0.024, "sustain":0.172, "tremoloDepth":0.3, "tremoloFrequency":37, "wave":"triangle" },
    "respawn":{ "attack":0.003, "decay":0.258, "frequency":245, "limit":0.384, "pitch":0.0006, "release":0.34, "sustain":0.144, "tremoloDepth":0.68, "tremoloFrequency":18.5, "wave":"square" },
    "spike":{ "decay":0.021, "frequency":12800, "release":0.036, "wave":"whitenoise" },
    "time":{ "attack":0.003, "decay":0.012, "frequency":732.5, "limit":0.424, "pitch":0.0002, "release":0.104, "sustain":0.004, "tremoloDepth":0.92, "tremoloFrequency":29, "wave":"square" }
  },
  "stencils":{
    "codeDisableSlot":{ "set":{ "removeType":[ "slot", "wallslot", "withmirrorxy" ] } },
    "codeFinalizeScore":{
      "when":{ "_":[ "cheat", "unlimitedlives", "not" ] },
      "execute":[
        { "publishScore":{ "_":[ "variable", "score" ] } },
        {
          "when":{ "_":[ "variable", "score", "isGreaterThan", { "_":[ "variable", "hiscore" ] } ] },
          "execute":[
            { "as":[ { "_":"storage" }, { "_":"variable" } ], "set":{ "hiscore":{ "_":[ "variable", "score" ] } } },
            {
              "object":{
                "type":"message",
                "width":320, "height":14,
                "zIndex":10006, "x":0, "y":128,
                "bgcolor":"#000", "color":"#984b43",
                "font":"commodore", "fontSize":8, "lineHeight":14, "textAlign":"center", "html":"NEW HIGH SCORE!",
                "states":{ "code":{ "name":"Sequence", "data":{ "set":{ "visible":{ "_":[ "this", "visible", "not" ] } }, "wait":1, "loop":1, "cycles":10 } } }
              }
            }
          ]
        }
      ]
    },
    "codeGenerateDungeonAndMirror":[
      {
        "times":{ "_":[ "variable", "dungeonEnemyNests", "*", { "_":[ "scene", "tileMul" ] } ] },
        "execute":{
          "as":{ "_":[ "randomValue", { "_":[ "this", "tileArea", "complexCollidesWith", { "subject":{ "_":[ "object", "slot" ] }, "all":1 } ] } ] },
          "execute":[
            { "set":{ "_":[ "stencil", "enemyNest" ] } },
            { "as":{ "_":[ "objectTyped", { "_":[ "this", { "_":[ "scene", "mirror" ] } ] } ] }, "set":{ "_":[ "stencil", "enemyNest" ] } }
          ]
        }
      },
      {
        "times":{ "_":[ "variable", "dungeonWalls", "*", { "_":[ "scene", "tileMul" ] } ] },
        "execute":{
          "as":{ "_":[ "randomValue", { "_":[ "this", "tileArea", "complexCollidesWith", { "subject":{ "_":[ "object", "wallslot" ] } } ] } ] },
          "execute":[
            { "set":{ "_":[ "stencil", "wall" ] } },
            { "as":{ "_":[ "objectTyped", { "_":[ "this", { "_":[ "scene", "mirror" ] } ] } ] }, "set":{ "_":[ "stencil", "wall" ] } }
          ]
        }
      },
      {
        "times":{ "_":[ "variable", "dungeonResources", "*", { "_":[ "scene", "tileMul" ] } ] },
        "execute":{
          "as":{ "_":[ "randomValue", { "_":[ "this", "tileArea", "complexCollidesWith", { "subject":{ "_":[ "object", "slot" ] }, "all":1 } ] } ] },
          "execute":[
            {
              "as":{ "_":"scene" },
              "execute":{
                "when":{ "_":[ "randomNumber", [ 0, 10 ], "isLessEqualThan", { "_":[ "variable", "luck" ] } ] },
                "execute":{
                  "when":{ "_":[ "randomNumber", [ 0, 10 ], "isLessEqualThan", { "_":[ "variable", "dungeonHealthRatio" ] } ] },
                  "set":{ "spawnThis":{ "_":[ "stencil", "healthBlock" ] } },
                  "elseExecute":{ "set":{ "spawnThis":{ "_":[ "stencil", "goldBlock" ] } } }
                },
                "elseExecute":{ "set":{ "spawnThis":{ "_":[ "stencil", "rockBlock" ] } } }
              }
            },
            { "object":{ "set":{ "_":[ "scene", "spawnThis" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } },
            {
              "as":{ "_":[ "objectTyped", { "_":[ "this", { "_":[ "scene", "mirror" ] } ] } ] },
              "execute":{ "object":{ "set":{ "_":[ "scene", "spawnThis" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
            }
          ]
        }
      },
      {
        "times":{ "_":[ "variable", "hazards", "*", { "_":[ "scene", "tileMul" ] } ] },
        "execute":{
          "as":{ "_":[ "randomValue", { "_":[ "this", "tileArea", "complexCollidesWith", { "subject":{ "_":[ "object", "slot" ] }, "all":1 } ] } ] },
          "execute":[
            {
              "as":{ "_":"scene" },
              "set":{ "hazard":{ "_":[ "stencil", "dataHazards", { "_":[ "randomNumber", [ 0, { "_":[ "variable", "hazardsLevel" ] } ] ] } ] } }
            },
            { "object":{ "set":{ "_":[ "scene", "hazard" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } },
            {
              "as":{ "_":[ "objectTyped", { "_":[ "this", { "_":[ "scene", "mirror" ] } ] } ] },
              "execute":{ "object":{ "set":{ "_":[ "scene", "hazard" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
            }
          ]
        }
      }
    ],
    "codeHandleJoin":[
      { "set":{ "joined":0 } },
      {
        "when":{ "_":[ "objectTyped", "player1", "not" ] },
        "execute":{
          "when":{ "_":[ "keyA", "isHit" ] },
          "execute":{
            "when":{ "_":[ "variable", "gold", "isGreaterEqualThan", { "_":[ "variable", "goldForLife" ] } ] },
            "execute":[ { "_":[ "stencil", "codeUseNewLife" ] }, { "set":{ "joinPlayer":"player1" }, "execute":{ "_":[ "stencil", "codeJoinPlayer" ] } } ]
          }
        },
        "elseExecute":{ "set":{ "joined":1 } }
      },
      {
        "when":{ "_":[ "objectTyped", "player2", "not" ] },
        "execute":{
          "when":{ "_":[ "keyA2", "isHit" ] },
          "execute":{
            "when":{ "_":[ "variable", "gold", "isGreaterEqualThan", { "_":[ "variable", "goldForLife" ] } ] },
            "execute":[ { "_":[ "stencil", "codeUseNewLife" ] }, { "set":{ "joinPlayer":"player2" }, "execute":{ "_":[ "stencil", "codeJoinPlayer" ] } } ]
          }
        },
        "elseExecute":{ "set":{ "joined":1 } }
      }
    ],
    "codeJoinPlayer":[
      { "_":[ "stencil", "codeResetTimer" ] },
      { "set":{ "playerData":{ "_":[ "stencil", { "_":[ "this", "joinPlayer" ] } ] } } },
      {
        "object":{
          "set":{ "_":[ "that", "playerData" ] },
          "x":{ "_":[ "objectTyped", { "_":[ "that", "playerData", "spawnpoint" ] }, "x", "-", 4 ] }, "y":{ "_":[ "objectTyped", { "_":[ "that", "playerData", "spawnpoint" ] }, "y", "-", 12 ] },
          "heroHp":{ "_":[ "that", "joinPlayerHp" ] },
          "heroXp":{ "_":[ "that", "joinPlayerXp" ] }
        },
        "playAudio":"respawn"
      },
      { "set":{ "joinPlayerHp":0, "joinPlayerXp":0 } }
    ],
    "codePickObjects":{ "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "pickable" ] } ] }, "as":{ "_":"that" }, "executeAction":"pick" },
    "codeResetTimer":[
      { "as":{ "_":[ "object", "killer" ] }, "execute":{ "object":{ "_":[ "stencil", "spark" ] }, "remove":1 } },
      {
        "as":{ "_":"scene" },
        "set":{ "timeLeft":{ "_":[ "scene", "enemiesCount", "*", { "_":[ "variable", "timePerEnemy" ] }, "limitValue", [ 375, 1000000 ] ] } }
      }
    ],
    "codeRumble":{
      "when":{ "_":[ "this", "rumble" ] },
      "subtract":1,
      "to":{ "_":[ "this", "rumble" ] },
      "set":{ "x":{ "_":[ "this", "rumble", "%", 2 ] } },
      "elseExecute":{ "set":{ "x":0 } }
    },
    "codeSetAngle":{
      "when":{ "_":[ "this", "kUp", "isDown" ] },
      "execute":{
        "when":{ "_":[ "this", "kLeft", "isDown" ] },
        "set":{ "aimAngle":315 },
        "elseExecute":{ "when":{ "_":[ "this", "kRight", "isDown" ] }, "set":{ "aimAngle":45 }, "elseExecute":{ "set":{ "aimAngle":0 } } }
      },
      "elseExecute":{
        "when":{ "_":[ "this", "kDown", "isDown" ] },
        "execute":{
          "when":{ "_":[ "this", "kLeft", "isDown" ] },
          "set":{ "aimAngle":225 },
          "elseExecute":{ "when":{ "_":[ "this", "kRight", "isDown" ] }, "set":{ "aimAngle":135 }, "elseExecute":{ "set":{ "aimAngle":180 } } }
        },
        "elseExecute":{
          "when":{ "_":[ "this", "kLeft", "isDown" ] },
          "set":{ "aimAngle":270 },
          "elseExecute":{ "when":{ "_":[ "this", "kRight", "isDown" ] }, "set":{ "aimAngle":90 } }
        }
      }
    },
    "codeSpawnBonus":{
      "as":{ "_":"scene" },
      "execute":[
        { "set":{ "bonusToSpawn":{ "_":[ "randomValue", { "_":[ "stencil", "dataBonus" ] } ] } } },
        {
          "times":10,
          "when":{ "_":[ "scene", "bonusToSpawn" ] },
          "execute":{
            "as":{ "_":[ "randomObject", { "_":[ "object", "slot" ] } ] },
            "execute":{
              "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "player" ] }, "not" ] },
              "execute":[
                {
                  "object":{
                    "set":[ { "_":[ "stencil", "bonusModel" ] }, { "_":[ "scene", "bonusToSpawn" ] } ],
                    "at":{ "_":"that" },
                    "execute":{
                      "when":{ "_":[ "this", "malus" ] },
                      "set":{ "cardTrend":1, "palette":[ "#adadad", "#c37b75", "#9b51a5" ], "score":20, "sound":"powerdown" },
                      "elseExecute":{ "set":{ "cardTrend":-1, "palette":[ "#fff", "#c9d684", "#8a7bce" ], "score":50, "sound":"powerup" } }
                    }
                  }
                },
                { "as":{ "_":"scene" }, "set":{ "bonusToSpawn":0 } }
              ]
            }
          }
        }
      ]
    },
    "codeTrimSettings":{
      "as":{ "_":"variable" },
      "execute":[
        {
          "set":{
            "bonusEvery":{ "_":[ "this", "bonusEvery", "limitValue", [ 4, 10 ] ] },
            "buffDuration":{ "_":[ "this", "buffDuration", "limitValue", [ 125, 375 ] ] },
            "dungeonEnemyNests":{ "_":[ "this", "dungeonEnemyNests", "limitValue", [ 1, 6 ] ] },
            "dungeonHealthRatio":{ "_":[ "this", "dungeonHealthRatio", "limitValue", [ 0, 10 ] ] },
            "dungeonResources":{ "_":[ "this", "dungeonResources", "limitValue", [ 2, 10 ] ] },
            "dungeonWalls":{ "_":[ "this", "dungeonWalls", "limitValue", [ 2, 10 ] ] },
            "enemiesCount":{ "_":[ "this", "enemiesCount", "limitValue", [ 6, 30 ] ] },
            "enemyLevelHigh":{ "_":[ "this", "enemyLevelHigh", "limitValue", [ 2, 10 ] ] },
            "enemyLevelLow":{ "_":[ "this", "enemyLevelLow", "limitValue", [ 1, 10 ] ] },
            "enemyRecoverTime":{ "_":[ "this", "enemyRecoverTime", "limitValue", [ 5, 15 ] ] },
            "goldForLife":{ "_":[ "this", "goldForLife", "limitValue", [ 5, 1000 ] ] },
            "goldSpawnRatio":{ "_":[ "this", "goldSpawnRatio", "limitValue", [ 2, 8 ] ] },
            "hazards":{ "_":[ "this", "hazards", "limitValue", [ 0, 10 ] ] },
            "hazardsLevel":{ "_":[ "this", "hazardsLevel", "limitValue", [ 0, { "_":[ "stencil", "dataHazards", "count", "-", 1 ] } ] ] },
            "hpSpawnRatio":{ "_":[ "this", "hpSpawnRatio", "limitValue", [ 2, 8 ] ] },
            "intensity":{ "_":[ "this", "intensity", "limitValue", [ 2, 6 ] ] },
            "luck":{ "_":[ "this", "luck", "limitValue", [ 0, 10 ] ] },
            "startCardTrend":{ "_":[ "this", "startCardTrend", "limitValue", [ -4, -2 ] ] },
            "timePerEnemy":{ "_":[ "this", "timePerEnemy", "limitValue", [ 75, 250 ] ] }
          }
        },
        {
          "when":{ "_":[ "this", "enemyLevelLow", "isGreaterEqualThan", { "_":[ "this", "enemyLevelHigh" ] } ] },
          "set":{ "enemyLevelLow":{ "_":[ "this", "enemyLevelHigh", "-", 1 ] } }
        },
        { "when":{ "_":[ "cheat", "unlimitedlives" ] }, "set":{ "goldForLife":0 } }
      ]
    },
    "codeUpdateLevel":[
      {
        "set":{
          "frame":{ "_":[ "this", "heroLevel", "-", 1 ] },
          "heroAttack":{ "_":[ "this", "heroLevel", "*", { "_":[ "this", "growthRatio" ] }, "floor" ] },
          "heroAttackForce":{ "_":[ "this", "heroLevel", "*", 1.43, "+", 3 ] },
          "heroAttackSpeed":{ "_":[ "this", "heroLevel", "/", { "_":[ "this", "growthRatio" ] }, "+", { "_":[ "this", "recoverTime" ] }, "floor" ] },
          "heroMaxHp":{ "_":[ "this", "heroLevel", "*", 1.5, "*", { "_":[ "this", "growthRatio" ] }, "floor", "+", { "_":[ "this", "heroBaseHp" ] } ] },
          "heroNextXP":{ "_":[ "this", "heroLevel", "*", 10, "limitValue", [ 1, 99 ] ] },
          "heroRecoverTime":{ "_":[ "this", "heroLevel", "/", { "_":[ "this", "growthRatio" ] }, "+", { "_":[ "this", "recoverTime" ] } ] },
          "heroSpeed":{ "_":[ 3.1, "-", { "_":[ "this", "heroLevel", "/", 10 ] } ] }
        }
      },
      { "when":{ "_":[ "this", "heroHp", "not" ] }, "set":{ "heroHp":{ "_":[ "this", "heroMaxHp" ] } } },
      { "when":{ "_":[ "this", "heroXp", "not" ] }, "set":{ "heroXp":0 } }
    ],
    "codeUseNewLife":[
      { "as":{ "_":"scene" }, "set":{ "rumble":10 } },
      { "subtract":{ "_":[ "variable", "goldForLife" ] }, "to":{ "_":[ "variable", "gold" ] } },
      { "as":{ "_":"variable" }, "set":{ "goldForLife":{ "_":[ "variable", "goldForLife", "*", 1.5, "ceil" ] } } },
      { "as":{ "_":[ "object", "goldindicator" ] }, "executeAction":"update" }
    ],
    "spark":{
      "image":"sprites", "tileY":72, "width":16, "height":16,
      "zIndex":10000, "x":{ "_":[ "this", "xCenteredWith", { "_":"that" } ] }, "y":{ "_":[ "this", "yCenteredWith", { "_":"that" } ] },
      "animations":{ "spark":{ "frames":4, "speed":0 } },
      "animation":"spark",
      "states":{ "code":{ "name":"Sequence", "data":[ { "wait":4 }, { "remove":1 } ] } }
    },
    "modelPopupLabel":{
      "width":100, "height":12,
      "zIndex":2000, "x":{ "_":[ "this", "xCenteredWith", { "_":"that" } ] }, "y":{ "_":[ "that", "y", "+", 3 ] },
      "color":{ "_":[ "that", "labelColor" ] },
      "font":"commodore", "fontSize":8, "lineHeight":10, "outline":"#000", "textAlign":"center",
      "speed":0.5,
      "states":{
        "code":{
          "name":"Sequence",
          "data":[ { "subtract":{ "_":[ "this", "speed" ] }, "to":{ "_":[ "this", "y" ] }, "wait":1, "loop":1, "cycles":15 }, { "remove":1 } ]
        }
      }
    },
    "playerBomb":{ "set":{ "_":[ "stencil", "bombModel" ] }, "spawns":"playerFlame" },
    "playerBounce":{ "set":{ "_":[ "stencil", "bouncerModel" ] }, "hits":"enemy" },
    "playerFlame":{ "set":{ "_":[ "stencil", "flameModel" ] }, "hits":"enemy" },
    "playerModel":{
      "type":"player",
      "set":{ "_":[ "stencil", "heroModel" ] },
      "growthRatio":{ "_":[ "variable", "playerGrowthRatio" ] },
      "heroBaseHp":2,
      "hits":"enemy",
      "invulnerability":75,
      "invulnerabilityOnHit":75,
      "states":[
        {
          "name":"play",
          "actions":{
            "name":"logic",
            "execute":[
              { "_":[ "this", "getControls" ] },
              { "set":{ "moveSpeed":{ "_":[ "this", "buff", "heroSpeedBonus", "*", 0.5 ] } } },
              {
                "when":{ "_":[ "this", "kUp", "isDown" ] },
                "subtract":{ "_":[ "this", "moveSpeed" ] },
                "to":{ "_":[ "this", "forceY" ] },
                "elseExecute":{ "when":{ "_":[ "this", "kDown", "isDown" ] }, "sum":{ "_":[ "this", "moveSpeed" ] }, "to":{ "_":[ "this", "forceY" ] } }
              },
              {
                "when":{ "_":[ "this", "kLeft", "isDown" ] },
                "subtract":{ "_":[ "this", "moveSpeed" ] },
                "to":{ "_":[ "this", "forceX" ] },
                "elseExecute":{ "when":{ "_":[ "this", "kRight", "isDown" ] }, "sum":{ "_":[ "this", "moveSpeed" ] }, "to":{ "_":[ "this", "forceX" ] } }
              },
              { "when":{ "_":[ "this", "kA", "isHit" ] }, "executeAction":"attack", "playAudio":"attack" },
              { "_":[ "stencil", "codeSetAngle" ] },
              { "_":[ "stencil", "codePickObjects" ] }
            ]
          }
        },
        {
          "name":"attack",
          "code":{ "name":"Execute", "data":[ { "_":[ "this", "getControls" ] }, { "_":[ "stencil", "codeSetAngle" ] }, { "_":[ "stencil", "codePickObjects" ] } ] }
        },
        { "name":"dash", "code":{ "name":"Execute", "data":{ "_":[ "stencil", "codePickObjects" ] } } }
      ]
    },
    "player1":{
      "type":"player1",
      "set":{ "_":[ "stencil", "playerModel" ] },
      "getControls":{
        "set":{
          "kA":{ "_":"keyA" },
          "kB":{ "_":"keyB" },
          "kDown":{ "_":"keyDown" },
          "kLeft":{ "_":"keyLeft" },
          "kRight":{ "_":"keyRight" },
          "kUp":{ "_":"keyUp" }
        }
      },
      "heroLevel":{ "_":[ "variable", "player1Level" ] },
      "labelColor":"#c37b75",
      "levelBackup":"player1Level",
      "spawnpoint":"player1spawn"
    },
    "player2":{
      "type":"player2",
      "set":{ "_":[ "stencil", "playerModel" ] },
      "tileY":24,
      "getControls":{
        "set":{
          "kA":{ "_":"keyA2" },
          "kB":{ "_":"keyB2" },
          "kDown":{ "_":"keyDown2" },
          "kLeft":{ "_":"keyLeft2" },
          "kRight":{ "_":"keyRight2" },
          "kUp":{ "_":"keyUp2" }
        }
      },
      "heroLevel":{ "_":[ "variable", "player2Level" ] },
      "hits":"enemy",
      "labelColor":"#79c1c8",
      "levelBackup":"player2Level",
      "spawnpoint":"player2spawn"
    },
    "enemyBomb":{ "set":{ "_":[ "stencil", "bombModel" ] }, "tileX":160, "spawns":"enemyFlame" },
    "enemyBounce":{ "set":{ "_":[ "stencil", "bouncerModel" ] }, "tileX":112, "hits":"player" },
    "enemyNest":{ "type":"enemyNest", "image":"tiles", "tileX":64, "tileY":{ "_":[ "variable", "dungeonSkin" ] }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } },
    "enemyFlame":{ "set":{ "_":[ "stencil", "flameModel" ] }, "tileX":80, "hits":"player" },
    "enemyFourFlames":{
      "set":{ "_":[ "stencil", "flameModel" ] },
      "tileX":80,
      "playAudio":"explosion",
      "hits":"player",
      "states":{
        "execute":{
          "object":[
            { "set":{ "_":[ "stencil", "enemyFlame" ] }, "at":{ "_":"that" }, "forceX":0, "forceY":-1, "heroAttack":{ "_":[ "that", "heroAttack" ] } },
            { "set":{ "_":[ "stencil", "enemyFlame" ] }, "at":{ "_":"that" }, "forceX":0, "forceY":1, "heroAttack":{ "_":[ "that", "heroAttack" ] } },
            { "set":{ "_":[ "stencil", "enemyFlame" ] }, "at":{ "_":"that" }, "forceX":-1, "forceY":0, "heroAttack":{ "_":[ "that", "heroAttack" ] } },
            { "set":{ "_":[ "stencil", "enemyFlame" ] }, "at":{ "_":"that" }, "forceX":1, "forceY":0, "heroAttack":{ "_":[ "that", "heroAttack" ] } }
          ]
        }
      }
    },
    "enemy":{
      "type":"enemy",
      "set":{ "_":[ "stencil", "heroModel" ] },
      "tileY":48,
      "escapeTimer":0,
      "giveXp":1,
      "growthRatio":{ "_":[ "variable", "enemyGrowthRatio" ] },
      "hits":"player",
      "invulnerabilityOnHit":5,
      "labelColor":"#8a7bce",
      "recoverTime":{ "_":[ "variable", "enemyRecoverTime" ] },
      "roamTimer":0,
      "states":{
        "name":"play",
        "actions":[
          { "name":"hitwall", "execute":{ "set":{ "roamTimer":0 } } },
          {
            "name":"logic",
            "execute":[
              { "set":{ "dist":80, "nearest":0 } },
              {
                "as":{ "_":[ "object", "player" ] },
                "execute":[
                  { "set":{ "dist":{ "_":[ "this", "distanceTo", { "_":"that" } ] } } },
                  {
                    "when":{ "_":[ "this", "dist", "isLessThan", { "_":[ "that", "dist" ] } ] },
                    "as":{ "_":"that" },
                    "set":{ "dist":{ "_":[ "that", "dist" ] }, "nearest":{ "_":"that" } }
                  }
                ]
              },
              {
                "when":{ "_":[ "this", "nearest" ] },
                "execute":[
                  { "set":{ "roamTimer":0 } },
                  {
                    "when":{ "_":[ "this", "escapeTimer" ] },
                    "execute":[
                      { "subtract":1, "to":{ "_":[ "this", "escapeTimer" ] } },
                      { "sumVector":{ "angle":{ "_":[ "this", "angleTo", { "_":[ "this", "nearest" ] }, "+", 180 ] }, "length":0.3 } }
                    ],
                    "elseExecute":{
                      "when":{ "_":[ "this", "dist", "isLessThan", { "_":[ "this", "heroAttackForce", "*", 6 ] } ] },
                      "set":{ "aimAngle":{ "_":[ "this", "angleTo", { "_":[ "this", "nearest" ] } ] }, "escapeTimer":{ "_":[ "randomNumber", [ 24, 48 ] ] } },
                      "executeAction":"attack",
                      "elseExecute":{ "sumVector":{ "angle":{ "_":[ "this", "angleTo", { "_":[ "this", "nearest" ] } ] }, "length":0.3 } }
                    }
                  }
                ],
                "elseExecute":[
                  {
                    "when":{ "_":[ "this", "roamTimer" ] },
                    "subtract":1,
                    "to":{ "_":[ "this", "roamTimer" ] },
                    "elseExecute":{ "set":{ "roamDestination":{ "_":[ "randomObject", { "_":[ "object", "slot" ] } ] }, "roamTimer":75 } }
                  },
                  {
                    "when":{ "_":[ "this", "distanceTo", { "_":[ "this", "roamDestination" ] }, "isLessThan", 20 ] },
                    "set":{ "roamTimer":0 },
                    "elseExecute":{ "sumVector":{ "angle":{ "_":[ "this", "angleTo", { "_":[ "this", "roamDestination" ] } ] }, "length":0.3 } }
                  }
                ]
              }
            ]
          }
        ]
      }
    },
    "bombModel":{
      "image":"sprites", "tileX":128, "tileY":72, "width":16, "height":16,
      "animTimer":0,
      "bombTime":75,
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":{
              "when":{ "_":[ "this", "bombTime" ] },
              "execute":[
                { "subtract":1, "to":{ "_":[ "this", "bombTime" ] } },
                { "sum":1, "to":{ "_":[ "this", "animTimer" ] } },
                {
                  "when":{ "_":[ "this", "animTimer", "isGreaterThan", { "_":[ "this", "bombTime", "/", 5 ] } ] },
                  "execute":[ { "set":{ "animTimer":0 } }, { "when":{ "_":[ "this", "frame" ] }, "set":{ "frame":0 }, "elseExecute":{ "set":{ "frame":1 } } } ]
                }
              ],
              "elseExecute":[
                { "as":{ "_":"scene" }, "set":{ "rumble":4 }, "playAudio":"explosion" },
                {
                  "object":[
                    { "_":[ "stencil", "spark" ] },
                    {
                      "set":{ "_":[ "stencil", { "_":[ "that", "spawns" ] } ] },
                      "at":{ "_":"that" },
                      "forceX":0, "forceY":-2,
                      "heroAttack":{ "_":[ "that", "heroAttack" ] }
                    },
                    {
                      "set":{ "_":[ "stencil", { "_":[ "that", "spawns" ] } ] },
                      "at":{ "_":"that" },
                      "forceX":0, "forceY":2,
                      "heroAttack":{ "_":[ "that", "heroAttack" ] }
                    },
                    {
                      "set":{ "_":[ "stencil", { "_":[ "that", "spawns" ] } ] },
                      "at":{ "_":"that" },
                      "forceX":2, "forceY":0,
                      "heroAttack":{ "_":[ "that", "heroAttack" ] }
                    },
                    {
                      "set":{ "_":[ "stencil", { "_":[ "that", "spawns" ] } ] },
                      "at":{ "_":"that" },
                      "forceX":-2, "forceY":0,
                      "heroAttack":{ "_":[ "that", "heroAttack" ] }
                    }
                  ]
                },
                { "remove":1 }
              ]
            }
          },
          { "name":"ZPerspective" }
        ]
      }
    },
    "bonusModel":{
      "type":"pickable",
      "image":"sprites", "tileY":104, "width":16, "height":16,
      "zIndex":3,
      "labelColor":"#fff",
      "timer":250,
      "states":{
        "code":[
          {
            "name":"Sequence",
            "data":[
              { "set":{ "bgcolor":{ "_":[ "this", "palette", 0 ] } }, "wait":1 },
              { "set":{ "bgcolor":{ "_":[ "this", "palette", 1 ] } }, "wait":1 },
              { "set":{ "bgcolor":{ "_":[ "this", "palette", 2 ] } }, "wait":1 },
              { "set":{ "bgcolor":{ "_":[ "this", "palette", 1 ] } }, "wait":1, "loopTo":0 }
            ]
          },
          {
            "name":"Execute",
            "data":{
              "when":{ "_":[ "this", "timer" ] },
              "execute":[
                { "subtract":1, "to":{ "_":[ "this", "timer" ] } },
                { "when":{ "_":[ "this", "timer", "isLessThan", 75 ] }, "set":{ "visible":{ "_":[ "this", "visible", "not" ] } } }
              ],
              "elseExecute":{ "remove":1 }
            }
          }
        ],
        "actions":{
          "name":"pick",
          "execute":[
            { "set":{ "picker":{ "_":"that" } } },
            { "sum":{ "_":[ "this", "score" ] }, "to":{ "_":[ "variable", "score" ] } },
            { "playAudio":{ "_":[ "this", "sound" ] } },
            { "sum":{ "_":[ "this", "cardTrend" ] }, "to":{ "_":[ "variable", "nextCardTrend" ] } },
            {
              "when":{ "_":[ "this", "buff", "not" ] },
              "elseExecute":{ "as":{ "_":"that" }, "set":{ "buff":{ "_":[ "that", "buff" ] }, "buffTimer":{ "_":[ "variable", "buffDuration" ] } } }
            },
            { "when":{ "_":[ "this", "setOnPick", "not" ] }, "elseExecute":{ "as":{ "_":"that" }, "set":{ "_":[ "that", "setOnPick" ] } } },
            { "when":{ "_":[ "this", "executeOnPick", "not" ] }, "elseExecute":{ "_":[ "this", "executeOnPick" ] } },
            {
              "times":{ "_":[ "that", "heroLevel", "*", { "_":[ "this", "goldSpawnRatio" ] }, "+", { "_":[ "variable", "goldSpawnRatio" ] }, "ceil" ] },
              "object":{ "set":{ "_":[ "stencil", "goldGem" ] } }
            },
            { "remove":1 }
          ]
        }
      }
    },
    "bouncerModel":{
      "image":"sprites", "tileX":96, "tileY":72, "width":16, "height":16,
      "execute":{ "applyVector":{ "angle":{ "_":[ "randomNumber", [ 0, 360 ] ] }, "length":3 } },
      "buff":{ "_":[ "stencil", "dataNoBuff" ] },
      "heroAttack":1,
      "life":250,
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":{
              "when":{ "_":[ "this", "life" ] },
              "execute":[
                { "subtract":1, "to":{ "_":[ "this", "life" ] } },
                { "when":{ "_":[ "this", "life", "isLessThan", 25 ] }, "set":{ "visible":{ "_":[ "this", "visible", "not" ] } } },
                {
                  "when":{ "_":[ "this", "life", "isLessThan", 230 ] },
                  "execute":{
                    "when":{ "_":[ "this", "collidesWith", { "_":[ "object", { "_":[ "this", "hits" ] } ] } ] },
                    "execute":[ { "as":{ "_":"that" }, "executeAction":"hit" }, { "applyVector":{ "angle":{ "_":[ "randomNumber", [ 0, 360 ] ] }, "length":3 } } ]
                  }
                }
              ],
              "elseExecute":{ "object":{ "_":[ "stencil", "spark" ] }, "remove":1 }
            }
          },
          {
            "name":"Physics",
            "data":{ "walls":[ { "type":"wall", "restitution":1 }, { "area":{ "width":320, "height":200, "x":0, "y":0 }, "restitution":1 } ] }
          },
          { "name":"ZPerspective" }
        ]
      }
    },
    "bumpKing":{
      "type":"killer",
      "image":"sprites", "tileY":233, "width":24, "height":24,
      "x":148, "y":24,
      "hitbox":{ "width":10, "height":10, "x":7, "y":15 },
      "animations":{ "idle":{ "frames":2, "loopTo":0 } },
      "animation":"idle",
      "playAudio":"bumpking",
      "attacking":50,
      "buff":{ "_":[ "stencil", "dataNoBuff" ] },
      "moveSpeed":1,
      "spawning":26,
      "waitTimer":0,
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":[
              { "set":{ "target":{ "_":[ "objectTyped", { "_":[ "this", "player" ] } ] } } },
              {
                "when":{ "_":[ "this", "target" ] },
                "execute":[
                  { "set":{ "flipX":{ "_":[ "this", "x", "isGreaterThan", { "_":[ "this", "target", "x" ] } ] } } },
                  {
                    "when":{ "_":[ "this", "spawning" ] },
                    "execute":[ { "subtract":1, "to":{ "_":[ "this", "spawning" ] } }, { "set":{ "visible":{ "_":[ "this", "visible", "not" ] } } } ],
                    "elseExecute":[
                      {
                        "when":{ "_":[ "this", "attacking" ] },
                        "execute":[
                          { "translateBy":{ "angle":{ "_":[ "this", "angleTo", { "_":[ "this", "target" ] } ] }, "length":{ "_":[ "this", "moveSpeed" ] } } },
                          { "object":{ "_":[ "stencil", "smoke" ] } },
                          { "set":{ "waitTimer":25 } },
                          { "subtract":1, "to":{ "_":[ "this", "attacking" ] } }
                        ],
                        "elseExecute":{
                          "when":{ "_":[ "this", "waitTimer" ] },
                          "subtract":1,
                          "to":{ "_":[ "this", "waitTimer" ] },
                          "elseExecute":{ "sum":0.1, "to":{ "_":[ "this", "moveSpeed" ] }, "set":{ "attacking":50 }, "playAudio":"dash" }
                        }
                      },
                      {
                        "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "player" ] } ] },
                        "execute":[
                          { "as":{ "_":"scene" }, "set":{ "rumble":7 }, "playAudio":"explosion" },
                          { "set":{ "heroAttack":{ "_":[ "that", "heroMaxHp", "*", 2 ] } } },
                          { "as":{ "_":"that" }, "set":{ "invulnerability":0 }, "executeAction":"hit" }
                        ]
                      }
                    ]
                  }
                ],
                "elseExecute":[ { "object":{ "_":[ "stencil", "spark" ] } }, { "remove":1 } ]
              }
            ]
          },
          { "name":"ZPerspective" }
        ]
      }
    },
    "chainModel":{
      "type":"hazard",
      "image":"tiles", "tileX":80, "width":16, "height":16,
      "zIndex":3,
      "spinAngle":0,
      "spinSpeed":3,
      "states":{
        "name":"run",
        "execute":{
          "object":{
            "image":"sprites", "tileX":112, "tileY":72, "width":16, "height":16,
            "buff":{ "_":[ "stencil", "dataNoBuff" ] },
            "states":{
              "code":[
                {
                  "name":"Execute",
                  "data":{
                    "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "player" ] } ] },
                    "execute":[ { "set":{ "heroAttack":{ "_":[ "that", "heroHp", "/", 2, "ceil" ] } } }, { "as":{ "_":"that" }, "executeAction":"hit" } ]
                  }
                },
                { "name":"ZPerspective" }
              ]
            }
          },
          "assign":{ "_":"that" },
          "to":{ "_":[ "this", "ball" ] }
        },
        "code":{
          "name":"Execute",
          "data":[
            { "sum":{ "_":[ "this", "spinSpeed" ] }, "to":{ "_":[ "this", "spinAngle" ] } },
            { "as":{ "_":[ "this", "ball" ] }, "set":{ "at":{ "_":"that" } } },
            { "as":{ "_":[ "this", "ball" ] }, "translateBy":{ "angle":{ "_":[ "that", "spinAngle" ] }, "length":24 } }
          ]
        }
      }
    },
    "dataBonus":[
      {
        "frame":1,
        "buff":{
          "frame":1,
          "bgcolor":"#68ae5c",
          "heroAgilityBonus":1,
          "heroAttackBonus":1.5,
          "heroDefenseBonus":1,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":0
        },
        "goldSpawnRatio":1
      },
      {
        "frame":2,
        "buff":{
          "frame":2,
          "bgcolor":"#68ae5c",
          "heroAgilityBonus":1,
          "heroAttackBonus":1,
          "heroDefenseBonus":0.8,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":0
        },
        "goldSpawnRatio":1
      },
      {
        "frame":3,
        "buff":{
          "frame":3,
          "bgcolor":"#68ae5c",
          "heroAgilityBonus":0.3,
          "heroAttackBonus":1,
          "heroDefenseBonus":1,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":0
        },
        "goldSpawnRatio":1
      },
      {
        "frame":4,
        "buff":{
          "frame":4,
          "bgcolor":"#68ae5c",
          "heroAgilityBonus":1,
          "heroAttackBonus":1,
          "heroDefenseBonus":1,
          "heroSpeedBonus":2,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":0
        },
        "goldSpawnRatio":1
      },
      { "frame":5, "goldSpawnRatio":1, "setOnPick":{ "invulnerability":250 } },
      { "frame":6, "goldSpawnRatio":4 },
      { "frame":7, "executeOnPick":{ "times":{ "_":[ "that", "heroLevel" ] }, "object":{ "set":{ "_":[ "stencil", "xpGem" ] } } }, "goldSpawnRatio":1 },
      {
        "frame":8,
        "executeOnPick":{ "times":{ "_":[ "that", "heroHp", "/", 2, "ceil" ] }, "object":{ "_":[ "stencil", "healthGem" ] } },
        "goldSpawnRatio":1
      },
      {
        "frame":9,
        "buff":{
          "frame":9,
          "bgcolor":"#68ae5c",
          "heroAgilityBonus":1,
          "heroAttackBonus":1,
          "heroDefenseBonus":1,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":"playerBomb"
        },
        "goldSpawnRatio":1
      },
      {
        "frame":10,
        "executeOnPick":{
          "execute":{ "times":2, "object":{ "set":{ "_":[ "stencil", "playerBounce" ] }, "at":{ "_":"that" }, "heroAttack":{ "_":[ "that", "picker", "heroAttack" ] } } }
        },
        "goldSpawnRatio":1
      },
      {
        "frame":11,
        "buff":{
          "frame":11,
          "bgcolor":"#68ae5c",
          "heroAgilityBonus":1,
          "heroAttackBonus":1,
          "heroDefenseBonus":1,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":"playerFlame",
          "trailLength":100,
          "weapon":0
        },
        "goldSpawnRatio":1
      },
      { "frame":12, "executeOnPick":{ "as":{ "_":"that" }, "execute":{ "_":[ "stencil", "codeResetTimer" ] } }, "goldSpawnRatio":1 },
      { "frame":13, "executeOnPick":{ "sum":100, "to":{ "_":[ "variable", "score" ] } }, "goldSpawnRatio":1 },
      {
        "frame":14,
        "executeOnPick":{ "as":{ "_":"scene" }, "set":{ "enemiesCount":{ "_":[ "scene", "enemiesCount", "/", 2, "ceil" ] } } },
        "goldSpawnRatio":1
      },
      { "frame":15, "executeOnPick":{ "sum":1, "to":{ "_":[ "variable", "keys" ] } }, "goldSpawnRatio":1 },
      {
        "frame":16,
        "executeOnPick":[
          { "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":{ "_":[ "variable", "keys", ".", " KEYS" ] } } },
          {
            "when":{ "_":[ "variable", "keys", "isGreaterThan", 0 ] },
            "execute":{ "times":{ "_":[ "that", "heroHp" ] }, "object":{ "_":[ "stencil", "healthGem" ] } }
          },
          {
            "when":{ "_":[ "variable", "keys", "isGreaterThan", 1 ] },
            "execute":{ "times":{ "_":[ "variable", "goldForLife" ] }, "object":{ "_":[ "stencil", "goldGem" ] } }
          },
          {
            "when":{ "_":[ "variable", "keys", "isGreaterThan", 2 ] },
            "execute":{ "times":4, "object":{ "set":{ "_":[ "stencil", "playerBounce" ] }, "at":{ "_":"that" }, "heroAttack":{ "_":[ "that", "picker", "heroAttack" ] } } }
          },
          {
            "when":{ "_":[ "variable", "keys", "isGreaterThan", 3 ] },
            "execute":{ "times":{ "_":[ "that", "heroNextXP", "/", 2, "ceil" ] }, "object":{ "_":[ "stencil", "xpGem" ] } }
          },
          { "as":{ "_":"variable" }, "set":{ "keys":0 } }
        ],
        "goldSpawnRatio":1
      },
      { "frame":17, "executeOnPick":{ "as":{ "_":"variable" }, "set":{ "skipStages":2 } }, "goldSpawnRatio":1 },
      {
        "frame":1,
        "buff":{
          "frame":1,
          "bgcolor":"#984b43",
          "heroAgilityBonus":1,
          "heroAttackBonus":0.5,
          "heroDefenseBonus":1,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":0
        },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":2,
        "buff":{
          "frame":2,
          "bgcolor":"#984b43",
          "heroAgilityBonus":1,
          "heroAttackBonus":1,
          "heroDefenseBonus":1.2,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":0
        },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":3,
        "buff":{
          "frame":3,
          "bgcolor":"#984b43",
          "heroAgilityBonus":2,
          "heroAttackBonus":1,
          "heroDefenseBonus":1,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":0
        },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":4,
        "buff":{
          "frame":4,
          "bgcolor":"#984b43",
          "heroAgilityBonus":1,
          "heroAttackBonus":1,
          "heroDefenseBonus":1,
          "heroSpeedBonus":0.6,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":0
        },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":5,
        "executeOnPick":{ "as":{ "_":[ "randomObject", { "_":[ "object", "enemy" ] } ] }, "set":{ "invulnerability":250 } },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":6,
        "executeOnPick":{ "as":{ "_":"variable" }, "set":{ "gold":{ "_":[ "variable", "gold", "*", 0.9, "ceil" ] } } },
        "goldSpawnRatio":0.5,
        "malus":1
      },
      { "frame":7, "executeOnPick":{ "as":{ "_":"that" }, "set":{ "heroXp":{ "_":[ "this", "heroXp", "/", 2, "ceil" ] } } }, "goldSpawnRatio":2, "malus":1 },
      { "frame":8, "executeOnPick":{ "as":{ "_":"that" }, "set":{ "heroHp":{ "_":[ "this", "heroHp", "/", 2, "ceil" ] } } }, "goldSpawnRatio":2, "malus":1 },
      {
        "frame":9,
        "buff":{
          "frame":9,
          "bgcolor":"#984b43",
          "heroAgilityBonus":1,
          "heroAttackBonus":1,
          "heroDefenseBonus":1,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":0,
          "trailLength":0,
          "weapon":"enemyBomb"
        },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":10,
        "executeOnPick":{
          "execute":{
            "times":2,
            "object":{ "set":{ "_":[ "stencil", "enemyBounce" ] }, "at":{ "_":"that" }, "heroAttack":{ "_":[ "that", "picker", "heroAttack", "/", 2, "ceil" ] } }
          }
        },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":11,
        "buff":{
          "frame":11,
          "bgcolor":"#984b43",
          "heroAgilityBonus":1,
          "heroAttackBonus":1,
          "heroDefenseBonus":1,
          "heroSpeedBonus":1,
          "thenWeapon":0,
          "trail":"enemyFlame",
          "trailLength":1,
          "weapon":0
        },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":12,
        "executeOnPick":{ "when":{ "_":[ "scene", "timeLeft", "isGreaterThan", 255 ] }, "as":{ "_":"scene" }, "set":{ "timeLeft":255 } },
        "goldSpawnRatio":2,
        "malus":1
      },
      { "frame":13, "executeOnPick":{ "sum":1, "to":{ "_":[ "variable", "score" ] } }, "goldSpawnRatio":2, "malus":1 },
      {
        "frame":14,
        "executeOnPick":{
          "as":{ "_":"scene" },
          "set":{
            "enemiesCount":{
              "_":[ "scene", "enemiesCount", "+", { "_":[ "variable", "enemiesCount", "/", 3, "ceil" ] }, "limitValue", [ 1, { "_":[ "variable", "enemiesCount" ] } ] ]
            }
          }
        },
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":15,
        "executeOnPick":[
          { "subtract":1, "to":{ "_":[ "variable", "keys" ] } },
          { "when":{ "_":[ "variable", "keys", "isLessThan", 0 ] }, "as":{ "_":"variable" }, "set":{ "keys":0 } }
        ],
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":16,
        "executeOnPick":[
          { "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":{ "_":[ "variable", "keys", ".", " KEYS" ] } } },
          {
            "object":{ "set":{ "_":[ "stencil", "enemyBounce" ] }, "at":{ "_":"that" }, "heroAttack":{ "_":[ "that", "picker", "heroAttack", "/", 2, "ceil" ] } }
          },
          { "as":{ "_":"variable" }, "set":{ "keys":0 } }
        ],
        "goldSpawnRatio":2,
        "malus":1
      },
      {
        "frame":17,
        "executeOnPick":{ "as":{ "_":"scene" }, "set":{ "enemiesCount":{ "_":[ "variable", "enemiesCount" ] } } },
        "goldSpawnRatio":2,
        "malus":1
      }
    ],
    "dataDungeonCards":[
      {
        "card":{ "tileX":0, "sound":"powerup" },
        "cards":[
          { "label":"MORE ROCKS", "onDraw":{ "sum":2, "to":{ "_":[ "variable", "dungeonResources" ] } } },
          { "label":"LESS NESTS", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "dungeonEnemyNests" ] } } },
          { "label":"MORE WALLS", "onDraw":{ "sum":2, "to":{ "_":[ "variable", "dungeonWalls" ] } } },
          { "label":"MORE LUCK", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "luck" ] } } },
          { "label":"MORE HEALTH", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "dungeonHealthRatio" ] } } },
          { "label":"GOLD SPAWN+", "onDraw":{ "sum":2, "to":{ "_":[ "variable", "goldSpawnRatio" ] } } },
          { "label":"HEALTH SPAWN+", "onDraw":{ "sum":2, "to":{ "_":[ "variable", "hpSpawnRatio" ] } } },
          { "label":"SLOW ENEMY", "onDraw":{ "sum":2, "to":{ "_":[ "variable", "enemyRecoverTime" ] } } },
          { "label":"CHEAP LIFE", "onDraw":{ "as":{ "_":"variable" }, "set":{ "goldForLife":{ "_":[ "variable", "goldForLife", "*", 0.9, "ceil" ] } } } },
          { "label":"WEAK ENEMY", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "enemyLevelLow" ] } } },
          { "label":"MORE CARD+", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "startCardTrend" ] } } },
          { "label":"MORE BONUS", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "bonusEvery" ] } } },
          { "label":"EASY HAZARD", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "hazardsLevel" ] } } },
          { "label":"LESS HAZARD", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "hazards" ] } } },
          { "label":"MORE TIME", "onDraw":{ "sum":25, "to":{ "_":[ "variable", "timePerEnemy" ] } } },
          { "label":"CROWD DOWN", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "intensity" ] } } },
          { "label":"LONG BUFF", "onDraw":{ "sum":25, "to":{ "_":[ "variable", "buffDuration" ] } } }
        ]
      },
      {
        "card":{ "tileX":80, "sound":"powerdown" },
        "cards":[
          { "label":"LESS ROCKS", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "dungeonResources" ] } } },
          { "label":"MORE NESTS", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "dungeonEnemyNests" ] } } },
          { "label":"LESS WALLS", "onDraw":{ "subtract":2, "to":{ "_":[ "variable", "dungeonWalls" ] } } },
          { "label":"LESS LUCK", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "luck" ] } } },
          { "label":"LESS HEALTH", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "dungeonHealthRatio" ] } } },
          { "label":"HARD ENEMY", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "enemyLevelHigh" ] } } },
          { "label":"GOLD SPAWN-", "onDraw":{ "subtract":2, "to":{ "_":[ "variable", "goldSpawnRatio" ] } } },
          { "label":"HEALTH SPAWN-", "onDraw":{ "subtract":2, "to":{ "_":[ "variable", "hpSpawnRatio" ] } } },
          { "label":"FAST ENEMY", "onDraw":{ "subtract":2, "to":{ "_":[ "variable", "enemyRecoverTime" ] } } },
          { "label":"PRICEY LIFE", "onDraw":{ "as":{ "_":"variable" }, "set":{ "goldForLife":{ "_":[ "variable", "goldForLife", "*", 1.1, "ceil" ] } } } },
          { "label":"CROWD UP", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "intensity" ] } } },
          { "label":"MORE ENEMY", "onDraw":{ "sum":3, "to":{ "_":[ "variable", "enemiesCount" ] } } },
          { "label":"LESS CARD+", "onDraw":{ "subtract":1, "to":{ "_":[ "variable", "startCardTrend" ] } } },
          { "label":"LESS BONUS", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "bonusEvery" ] } } },
          { "label":"HARD HAZARD", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "hazardsLevel" ] } } },
          { "label":"MORE HAZARD", "onDraw":{ "sum":1, "to":{ "_":[ "variable", "hazards" ] } } },
          { "label":"LESS TIME", "onDraw":{ "subtract":25, "to":{ "_":[ "variable", "timePerEnemy" ] } } },
          { "label":"SHORT BUFF", "onDraw":{ "subtract":25, "to":{ "_":[ "variable", "buffDuration" ] } } }
        ]
      }
    ],
    "dataDungeonGenerators":[
      [
        { "set":{ "tileArea":{ "width":152, "height":88, "x":8, "y":8 } } },
        {
          "times":{ "_":[ "variable", "dungeonEnemyNests" ] },
          "execute":{
            "as":{ "_":[ "randomValue", { "_":[ "this", "tileArea", "complexCollidesWith", { "subject":{ "_":[ "object", "slot" ] }, "all":1 } ] } ] },
            "execute":[
              { "set":{ "_":[ "stencil", "enemyNest" ] } },
              { "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorX" ] } ] }, "set":{ "_":[ "stencil", "enemyNest" ] } },
              { "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorY" ] } ] }, "set":{ "_":[ "stencil", "enemyNest" ] } },
              { "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorXY" ] } ] }, "set":{ "_":[ "stencil", "enemyNest" ] } }
            ]
          }
        },
        {
          "times":{ "_":[ "variable", "dungeonWalls" ] },
          "execute":{
            "as":{ "_":[ "randomValue", { "_":[ "this", "tileArea", "complexCollidesWith", { "subject":{ "_":[ "object", "wallslot" ] } } ] } ] },
            "execute":[
              { "set":{ "_":[ "stencil", "wall" ] } },
              { "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorX" ] } ] }, "set":{ "_":[ "stencil", "wall" ] } },
              { "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorY" ] } ] }, "set":{ "_":[ "stencil", "wall" ] } },
              { "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorXY" ] } ] }, "set":{ "_":[ "stencil", "wall" ] } }
            ]
          }
        },
        {
          "times":{ "_":[ "variable", "dungeonResources" ] },
          "execute":{
            "as":{ "_":[ "randomValue", { "_":[ "this", "tileArea", "complexCollidesWith", { "subject":{ "_":[ "object", "slot" ] }, "all":1 } ] } ] },
            "execute":[
              {
                "as":{ "_":"scene" },
                "execute":{
                  "when":{ "_":[ "randomNumber", [ 0, 10 ], "isLessEqualThan", { "_":[ "variable", "luck" ] } ] },
                  "execute":{
                    "when":{ "_":[ "randomNumber", [ 0, 10 ], "isLessEqualThan", { "_":[ "variable", "dungeonHealthRatio" ] } ] },
                    "set":{ "spawnThis":{ "_":[ "stencil", "healthBlock" ] } },
                    "elseExecute":{ "set":{ "spawnThis":{ "_":[ "stencil", "goldBlock" ] } } }
                  },
                  "elseExecute":{ "set":{ "spawnThis":{ "_":[ "stencil", "rockBlock" ] } } }
                }
              },
              { "object":{ "set":{ "_":[ "scene", "spawnThis" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } },
              {
                "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorX" ] } ] },
                "execute":{ "object":{ "set":{ "_":[ "scene", "spawnThis" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
              },
              {
                "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorY" ] } ] },
                "execute":{ "object":{ "set":{ "_":[ "scene", "spawnThis" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
              },
              {
                "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorXY" ] } ] },
                "execute":{ "object":{ "set":{ "_":[ "scene", "spawnThis" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
              }
            ]
          }
        },
        {
          "times":{ "_":[ "variable", "hazards" ] },
          "execute":{
            "as":{ "_":[ "randomValue", { "_":[ "this", "tileArea", "complexCollidesWith", { "subject":{ "_":[ "object", "slot" ] }, "all":1 } ] } ] },
            "execute":[
              {
                "as":{ "_":"scene" },
                "set":{ "hazard":{ "_":[ "stencil", "dataHazards", { "_":[ "randomNumber", [ 0, { "_":[ "variable", "hazardsLevel" ] } ] ] } ] } }
              },
              { "object":{ "set":{ "_":[ "scene", "hazard" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } },
              {
                "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorX" ] } ] },
                "execute":{ "object":{ "set":{ "_":[ "scene", "hazard" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
              },
              {
                "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorY" ] } ] },
                "execute":{ "object":{ "set":{ "_":[ "scene", "hazard" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
              },
              {
                "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorXY" ] } ] },
                "execute":{ "object":{ "set":{ "_":[ "scene", "hazard" ] }, "at":{ "_":"that" } }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
              }
            ]
          }
        }
      ],
      {
        "set":{ "mirror":"typeMirrorX", "tileArea":{ "width":152, "height":176, "x":8, "y":8 }, "tileMul":4 },
        "execute":{ "_":[ "stencil", "codeGenerateDungeonAndMirror" ] }
      },
      {
        "set":{ "mirror":"typeMirrorY", "tileArea":{ "width":304, "height":88, "x":8, "y":8 }, "tileMul":4 },
        "execute":{ "_":[ "stencil", "codeGenerateDungeonAndMirror" ] }
      },
      {
        "set":{ "mirror":"typeMirrorXY", "tileArea":{ "width":152, "height":88, "x":8, "y":8 }, "tileMul":2 },
        "execute":{ "_":[ "stencil", "codeGenerateDungeonAndMirror" ] }
      }
    ],
    "dataEnemyBuff":[
      0,
      0,
      0,
      0,
      0,
      {
        "frame":0,
        "heroAgilityBonus":1,
        "heroAttackBonus":1,
        "heroDefenseBonus":1,
        "heroSpeedBonus":1,
        "thenWeapon":0,
        "trail":"enemyFlame",
        "trailLength":1,
        "weapon":0
      },
      {
        "frame":0,
        "heroAgilityBonus":1,
        "heroAttackBonus":1,
        "heroDefenseBonus":1,
        "heroSpeedBonus":1,
        "thenWeapon":0,
        "trail":0,
        "trailLength":0,
        "weapon":"enemyBomb"
      },
      0,
      {
        "frame":0,
        "heroAgilityBonus":1,
        "heroAttackBonus":1,
        "heroDefenseBonus":1,
        "heroSpeedBonus":1,
        "thenWeapon":0,
        "trail":"enemyFlame",
        "trailLength":100,
        "weapon":0
      },
      0,
      {
        "frame":0,
        "heroAgilityBonus":1,
        "heroAttackBonus":1,
        "heroDefenseBonus":1,
        "heroSpeedBonus":1,
        "thenWeapon":"enemyFourFlames",
        "trail":0,
        "trailLength":0,
        "weapon":0
      }
    ],
    "dataHazards":[
      { "set":{ "_":[ "stencil", "spikesModel" ] } },
      { "set":{ "_":[ "stencil", "spikesModel" ] }, "timer":75, "up":1 },
      { "set":{ "_":[ "stencil", "flameThrowerModel" ] }, "down":1, "up":1 },
      { "left":1, "right":1, "set":{ "_":[ "stencil", "flameThrowerModel" ] }, "frame":1 },
      { "set":{ "_":[ "stencil", "chainModel" ] }, "spinSpeed":3 },
      { "set":{ "_":[ "stencil", "flameThrowerModel" ] }, "down":1, "timer":75, "up":1 },
      { "set":{ "_":[ "stencil", "chainModel" ] }, "spinSpeed":-3 },
      { "left":1, "right":1, "set":{ "_":[ "stencil", "flameThrowerModel" ] }, "frame":1, "down":1, "up":1 },
      { "left":1, "right":1, "set":{ "_":[ "stencil", "flameThrowerModel" ] }, "frame":1 },
      { "left":1, "right":1, "set":{ "_":[ "stencil", "flameThrowerModel" ] }, "frame":1, "timer":75 },
      { "left":1, "right":1, "set":{ "_":[ "stencil", "flameThrowerModel" ] }, "frame":2, "down":1, "timer":75, "up":1 },
      { "set":{ "_":[ "stencil", "chainModel" ] }, "spinSpeed":6 },
      { "set":{ "_":[ "stencil", "chainModel" ] }, "spinSpeed":-6 }
    ],
    "dataNoBuff":{
      "frame":0,
      "heroAgilityBonus":1,
      "heroAttackBonus":1,
      "heroDefenseBonus":1,
      "heroSpeedBonus":1,
      "thenWeapon":0,
      "trail":0,
      "trailLength":0,
      "weapon":0
    },
    "flameModel":{
      "image":"sprites", "tileX":64, "tileY":72, "width":16, "height":16,
      "buff":{ "_":[ "stencil", "dataNoBuff" ] },
      "heroAttack":1,
      "life":25,
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":[
              { "set":{ "flipX":{ "_":[ "this", "flipX", "not" ] } } },
              { "when":{ "_":[ "this", "life" ] }, "subtract":1, "to":{ "_":[ "this", "life" ] }, "elseExecute":{ "remove":1 } },
              {
                "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "breakable" ] } ] },
                "execute":[ { "as":{ "_":"that" }, "executeAction":"hit" }, { "object":{ "_":[ "stencil", "spark" ] }, "remove":1 } ],
                "elseExecute":{
                  "when":{ "_":[ "this", "life", "isLessThan", 23 ] },
                  "execute":{
                    "when":{ "_":[ "this", "collidesWith", { "_":[ "object", { "_":[ "this", "hits" ] } ] } ] },
                    "execute":[ { "as":{ "_":"that" }, "executeAction":"hit" }, { "object":{ "_":[ "stencil", "spark" ] }, "remove":1 } ]
                  }
                }
              }
            ]
          },
          { "name":"Physics" },
          { "name":"ZPerspective" }
        ]
      }
    },
    "flameThrowerModel":{
      "type":"hazard",
      "image":"tiles", "tileX":32, "width":16, "height":16,
      "zIndex":3,
      "states":{
        "name":"run",
        "code":{
          "name":"Execute",
          "data":{
            "when":{ "_":[ "this", "timer" ] },
            "subtract":1,
            "to":{ "_":[ "this", "timer" ] },
            "elseExecute":[
              {
                "when":{ "_":[ "this", "up" ] },
                "object":{ "set":{ "_":[ "stencil", "enemyFlame" ] }, "at":{ "_":"that" }, "forceX":0, "forceY":-1, "heroAttack":{ "_":[ "variable", "stage", "*", 2 ] } }
              },
              {
                "when":{ "_":[ "this", "down" ] },
                "object":{ "set":{ "_":[ "stencil", "enemyFlame" ] }, "at":{ "_":"that" }, "forceX":0, "forceY":1, "heroAttack":{ "_":[ "variable", "stage", "*", 2 ] } }
              },
              {
                "when":{ "_":[ "this", "left" ] },
                "object":{ "set":{ "_":[ "stencil", "enemyFlame" ] }, "at":{ "_":"that" }, "forceX":-1, "forceY":0, "heroAttack":{ "_":[ "variable", "stage", "*", 2 ] } }
              },
              {
                "when":{ "_":[ "this", "right" ] },
                "object":{ "set":{ "_":[ "stencil", "enemyFlame" ] }, "at":{ "_":"that" }, "forceX":1, "forceY":0, "heroAttack":{ "_":[ "variable", "stage", "*", 2 ] } }
              },
              { "set":{ "timer":150 } }
            ]
          }
        }
      }
    },
    "gemModel":{
      "image":"sprites", "tileY":88, "width":8, "height":8,
      "x":{ "_":[ "this", "xCenteredWith", { "_":"that" } ] }, "y":{ "_":[ "this", "yCenteredWith", { "_":"that" } ] },
      "execute":{ "applyVector":{ "angle":{ "_":[ "randomNumber", [ 0, 360 ] ] }, "length":{ "_":[ "randomNumber", [ 10, 30 ], "/", 10 ] } } },
      "states":{
        "code":[
          {
            "name":"Execute",
            "data":{ "set":{ "forceX":{ "_":[ "this", "forceX", "*", 0.95 ] }, "forceY":{ "_":[ "this", "forceY", "*", 0.95 ] } }, "wait":1, "loop":1, "cycles":10 }
          },
          {
            "name":"Sequence",
            "data":[
              { "wait":5 },
              { "set":{ "type":"pickable" } },
              { "wait":100 },
              { "set":{ "visible":{ "_":[ "this", "visible", "not" ] } }, "wait":1, "loop":1, "cycles":25 },
              { "remove":1 }
            ]
          },
          { "name":"ZPerspective" },
          { "name":"Physics", "data":{ "walls":{ "type":"wall", "restitution":1 } } }
        ]
      }
    },
    "goldGem":{
      "set":{ "_":[ "stencil", "gemModel" ] },
      "tileX":16,
      "zIndex":10000,
      "labelColor":"#c9d684",
      "states":{
        "actions":{
          "name":"pick",
          "execute":[
            { "sum":1, "to":{ "_":[ "variable", "gold" ] }, "playAudio":"gold" },
            { "sum":3, "to":{ "_":[ "variable", "score" ] } },
            { "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":"+1GOLD" }, "as":{ "_":"that" } },
            { "as":{ "_":[ "objectTyped", "goldindicator" ] }, "executeAction":"update" },
            { "remove":1 }
          ]
        }
      }
    },
    "healthGem":{
      "set":{ "_":[ "stencil", "gemModel" ] },
      "tileX":8,
      "labelColor":"#68ae5c",
      "states":{
        "actions":{
          "name":"pick",
          "execute":[
            { "sum":2, "to":{ "_":[ "variable", "score" ] }, "playAudio":"health" },
            {
              "as":{ "_":"that" },
              "execute":[
                { "sum":1, "to":{ "_":[ "this", "heroHp" ] } },
                {
                  "when":{ "_":[ "this", "heroHp", "isGreaterThan", { "_":[ "this", "heroMaxHp" ] } ] },
                  "execute":{ "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":"HP MAX!" }, "set":{ "heroHp":{ "_":[ "this", "heroMaxHp" ] } } },
                  "elseExecute":{ "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":"+1HP" } }
                }
              ]
            },
            { "remove":1 }
          ]
        }
      }
    },
    "xpGem":{
      "set":{ "_":[ "stencil", "gemModel" ] },
      "labelColor":"#9b51a5",
      "states":{
        "actions":{
          "name":"pick",
          "execute":[
            {
              "as":{ "_":"that" },
              "execute":[
                { "sum":5, "to":{ "_":[ "variable", "score" ] } },
                { "sum":1, "to":{ "_":[ "this", "heroXp" ] }, "playAudio":"getxp" },
                {
                  "when":{ "_":[ "this", "heroXp", "isGreaterEqualThan", { "_":[ "this", "heroNextXP" ] } ] },
                  "execute":{
                    "when":{ "_":[ "this", "heroLevel", "isLessThan", 10 ] },
                    "execute":[
                      { "sum":1, "to":{ "_":[ "this", "heroLevel" ] } },
                      { "assign":{ "_":[ "this", "heroLevel" ] }, "to":{ "_":[ "variable", { "_":[ "this", "levelBackup" ] } ] } },
                      { "times":5, "object":{ "set":{ "_":[ "stencil", "largeSpark" ] } } },
                      { "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":"LEVEL UP!" }, "playAudio":"levelup" },
                      { "set":{ "heroHp":0, "heroXp":0 }, "execute":{ "_":[ "stencil", "codeUpdateLevel" ] } }
                    ],
                    "elseExecute":[]
                  },
                  "elseExecute":{ "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":"+1XP" } }
                }
              ]
            },
            { "remove":1 }
          ]
        }
      }
    },
    "heroModel":{
      "image":"sprites", "width":24, "height":24,
      "hitbox":{ "width":10, "height":10, "x":7, "y":15 },
      "aimAngle":0,
      "animationFrame":0,
      "animationTimer":0,
      "buff":{ "_":[ "stencil", "dataNoBuff" ] },
      "buffTimer":0,
      "growthRatio":1,
      "heroBaseHp":0,
      "heroLevel":1,
      "invulnerability":0,
      "recoverTime":0,
      "states":[
        { "execute":[ { "_":[ "stencil", "codeUpdateLevel" ] }, { "set":{ "state":"play" } } ] },
        {
          "name":"play",
          "like":{ "_":[ "stencil", "heroStateModel" ] },
          "set":{ "dashing":0 },
          "code":[
            {
              "name":"Execute",
              "data":[
                { "executeAction":"logic" },
                { "set":{ "forceX":{ "_":[ "this", "forceX", "*", 0.8 ] }, "forceY":{ "_":[ "this", "forceY", "*", 0.8 ] } } },
                {
                  "when":{ "_":[ "this", "this", "forceX", "or", { "_":[ "this", "forceY" ] } ] },
                  "execute":[
                    { "set":{ "flipX":{ "_":[ "this", "forceX", "isLessThan", 0 ] } } },
                    {
                      "when":{ "_":[ "this", "animationTimer" ] },
                      "subtract":1,
                      "to":{ "_":[ "this", "animationTimer" ] },
                      "elseExecute":[
                        { "set":{ "animationFrame":{ "_":[ "this", "animationFrame", "not" ] }, "animationTimer":2 } },
                        { "when":{ "_":[ "this", "animationFrame" ] }, "set":{ "tileX":240 }, "elseExecute":{ "set":{ "tileX":0 } } }
                      ]
                    }
                  ],
                  "elseExecute":{ "set":{ "tileX":0 } }
                },
                { "set":{ "speedLimit":{ "_":[ "this", "heroSpeed", "*", { "_":[ "this", "buff", "heroSpeedBonus" ] } ] } } },
                {
                  "set":{
                    "forceX":{ "_":[ "this", "forceX", "limitValue", [ { "_":[ "this", "speedLimit", "*", -1 ] }, { "_":[ "this", "speedLimit" ] } ] ] }, "forceY":{ "_":[ "this", "forceY", "limitValue", [ { "_":[ "this", "speedLimit", "*", -1 ] }, { "_":[ "this", "speedLimit" ] } ] ] }
                  }
                },
                { "when":{ "_":[ "this", "forceX", "abs", "isLessThan", 0.1 ] }, "set":{ "forceX":0 } },
                { "when":{ "_":[ "this", "forceY", "abs", "isLessThan", 0.1 ] }, "set":{ "forceY":0 } }
              ]
            },
            { "name":"Physics", "data":{ "walls":{ "type":"wall", "restitution":0, "execute":{ "executeAction":"hitwall" } } } },
            { "name":"ZPerspective" }
          ],
          "actions":{
            "name":"attack",
            "execute":[
              {
                "when":{ "_":[ "this", "buff", "weapon" ] },
                "object":{ "set":{ "_":[ "stencil", { "_":[ "that", "buff", "weapon" ] } ] }, "at":{ "_":"that" }, "heroAttack":{ "_":[ "that", "heroAttack" ] } }
              },
              { "set":{ "state":"attack" } }
            ]
          }
        },
        {
          "name":"attack",
          "like":{ "_":[ "stencil", "heroStateModel" ] },
          "set":{ "dashing":0 },
          "code":{
            "name":"Sequence",
            "data":[
              { "when":{ "_":[ "this", "tileX", "isEqualTo", 240 ] }, "set":{ "tileX":0 }, "elseExecute":{ "set":{ "tileX":240 } } },
              { "wait":1, "cycles":{ "_":[ "this", "heroAttackSpeed", "*", { "_":[ "this", "buff", "heroAgilityBonus" ] } ] }, "loopTo":-1 },
              { "set":{ "state":"dash" } }
            ]
          }
        },
        {
          "name":"dash",
          "like":{ "_":[ "stencil", "heroStateModel" ] },
          "set":{ "tileX":480, "dashTimer":0, "dashing":1, "trailLength":{ "_":[ "this", "buff", "trailLength" ] } },
          "execute":{ "applyVector":{ "angle":{ "_":[ "this", "aimAngle" ] }, "length":{ "_":[ "this", "heroAttackForce" ] } }, "playAudio":"dash" },
          "code":[
            { "name":"Physics", "data":{ "walls":{ "type":"wall", "restitution":0.8, "execute":{ "as":{ "_":"that" }, "executeAction":"hit" } } } },
            {
              "name":"Execute",
              "data":[
                {
                  "when":{ "_":[ "this", "trailLength" ] },
                  "execute":{
                    "when":{ "_":[ "this", "dashTimer" ] },
                    "subtract":1,
                    "to":{ "_":[ "this", "dashTimer" ] },
                    "elseExecute":[
                      { "subtract":1, "to":{ "_":[ "this", "trailLength" ] } },
                      {
                        "object":{
                          "set":{ "_":[ "stencil", { "_":[ "that", "buff", "trail" ] } ] },
                          "x":{ "_":[ "that", "x", "+", 4 ] }, "y":{ "_":[ "that", "y", "+", 8 ] },
                          "heroAttack":{ "_":[ "that", "heroAttack" ] }
                        }
                      },
                      { "set":{ "dashTimer":1 } }
                    ]
                  }
                },
                {
                  "when":{ "_":[ "this", "forceX", "abs", "isGreaterThan", 1, "or", { "_":[ "this", "forceY", "abs", "isGreaterThan", 1 ] } ] },
                  "object":{ "_":[ "stencil", "smoke" ] }
                },
                {
                  "when":{ "_":[ "this", "forceX", "abs", "isLessThan", 0.5, "and", { "_":[ "this", "forceY", "abs", "isLessThan", 0.5 ] } ] },
                  "execute":[
                    { "set":{ "forceX":0, "forceY":0, "state":"recover" } },
                    {
                      "when":{ "_":[ "this", "buff", "thenWeapon" ] },
                      "object":{ "set":{ "_":[ "stencil", { "_":[ "that", "buff", "thenWeapon" ] } ] }, "at":{ "_":"that" }, "heroAttack":{ "_":[ "that", "heroAttack" ] } }
                    }
                  ],
                  "elseExecute":{ "set":{ "forceX":{ "_":[ "this", "forceX", "*", 0.85 ] }, "forceY":{ "_":[ "this", "forceY", "*", 0.85 ] } } }
                },
                { "set":{ "newState":0 } },
                {
                  "as":{ "_":[ "this", "complexCollidesWith", { "subject":{ "_":[ "object", { "_":[ "this", "hits" ] } ] }, "all":1 } ] },
                  "execute":{
                    "when":{ "_":[ "this", "invulnerability", "not" ] },
                    "execute":{
                      "when":{ "_":[ "this", "dashing" ] },
                      "execute":{
                        "when":{ "_":[ "that", "heroLevel", "isGreaterThan", { "_":[ "this", "heroLevel" ] } ] },
                        "execute":[
                          { "executeAction":"hit" },
                          {
                            "when":{ "_":[ "that", "heroLevel", "-", { "_":[ "this", "heroLevel" ] }, "isLessThan", 2 ] },
                            "execute":{ "when":{ "_":[ "that", "newState", "isLessThan", 1 ] }, "as":{ "_":"that" }, "set":{ "newState":1 } }
                          }
                        ],
                        "elseExecute":{
                          "when":{ "_":[ "that", "heroLevel", "isLessThan", { "_":[ "this", "heroLevel" ] } ] },
                          "execute":[
                            { "when":{ "_":[ "this", "heroLevel", "-", { "_":[ "that", "heroLevel" ] }, "isLessThan", 2 ] }, "executeAction":"hitdone" },
                            { "as":{ "_":"that" }, "execute":{ "set":{ "newState":100 }, "executeAction":"hit" } }
                          ],
                          "elseExecute":[ { "executeAction":"stun" }, { "when":{ "_":[ "that", "newState", "isLessThan", 2 ] }, "as":{ "_":"that" }, "set":{ "newState":2 } } ]
                        }
                      },
                      "elseExecute":[
                        { "executeAction":"hit" },
                        {
                          "when":{ "_":[ "that", "heroLevel", "-", { "_":[ "this", "heroLevel" ] }, "isLessThan", 2 ] },
                          "execute":{ "when":{ "_":[ "that", "newState", "isLessThan", 1 ] }, "as":{ "_":"that" }, "set":{ "newState":1 } }
                        }
                      ]
                    }
                  }
                },
                { "when":{ "_":[ "this", "newState", "isEqualTo", 1 ] }, "executeAction":"hitdone" },
                { "when":{ "_":[ "this", "newState", "isEqualTo", 2 ] }, "executeAction":"stun" }
              ]
            },
            { "name":"ZPerspective" }
          ]
        },
        {
          "name":"recover",
          "like":{ "_":[ "stencil", "heroStateModel" ] },
          "set":{ "tileX":0, "dashing":0 },
          "code":{
            "name":"Sequence",
            "data":[
              { "sum":1, "to":{ "_":[ "this", "x" ] }, "wait":1 },
              {
                "subtract":1,
                "to":{ "_":[ "this", "x" ] },
                "wait":1, "cycles":{ "_":[ "this", "heroRecoverTime", "*", { "_":[ "this", "buff", "heroAgilityBonus" ] } ] },
                "loopTo":0
              },
              { "set":{ "state":"play" } }
            ]
          }
        },
        {
          "name":"destroy",
          "execute":[
            {
              "when":{ "_":[ "this", "giveXp" ] },
              "execute":[
                {
                  "times":{ "_":[ "this", "heroLevel" ] },
                  "object":{ "set":{ "_":[ "stencil", "xpGem" ] }, "x":{ "_":[ "that", "x", "+", 8 ] }, "y":{ "_":[ "that", "y", "+", 16 ] } }
                },
                { "sum":{ "_":[ "this", "heroLevel", "*", 10 ] }, "to":{ "_":[ "variable", "score" ] } }
              ],
              "elseExecute":[ { "_":[ "stencil", "codeResetTimer" ] }, { "as":{ "_":"scene" }, "set":{ "rumble":10 }, "playAudio":"dead" } ]
            },
            { "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":"DEAD" } },
            { "times":5, "object":{ "set":{ "_":[ "stencil", "largeSpark" ] } } },
            { "remove":1 }
          ]
        }
      ]
    },
    "heroStateModel":{
      "code":{
        "name":"Execute",
        "data":[
          {
            "when":{ "_":[ "this", "invulnerability" ] },
            "subtract":1,
            "to":{ "_":[ "this", "invulnerability" ] },
            "set":{ "visible":{ "_":[ "this", "visible", "not" ] } },
            "elseExecute":{ "set":{ "visible":1 } }
          },
          {
            "when":{ "_":[ "this", "buffTimer" ] },
            "execute":[
              { "subtract":1, "to":{ "_":[ "this", "buffTimer" ] } },
              { "when":{ "_":[ "this", "buffTimer", "not" ] }, "set":{ "buff":{ "_":[ "stencil", "dataNoBuff" ] } } }
            ]
          }
        ]
      },
      "actions":[
        {
          "name":"hit",
          "execute":{
            "when":{ "_":[ "this", "invulnerability", "not" ] },
            "execute":[
              { "object":{ "set":{ "_":[ "stencil", "largeSpark" ] } }, "playAudio":"hit" },
              {
                "set":{
                  "damage":{ "_":[ "that", "heroAttack", "*", { "_":[ "that", "buff", "heroAttackBonus" ] }, "*", { "_":[ "this", "buff", "heroDefenseBonus" ] }, "ceil" ] }
                }
              },
              { "subtract":{ "_":[ "this", "damage" ] }, "to":{ "_":[ "this", "heroHp" ] } },
              {
                "when":{ "_":[ "this", "heroHp", "isLessEqualThan", 0 ] },
                "set":{ "state":"destroy" },
                "elseExecute":[
                  { "object":{ "set":{ "_":[ "stencil", "modelPopupLabel" ] }, "html":{ "_":[ "", ".", "-", ".", { "_":[ "that", "damage" ] }, ".", "HP" ] } } },
                  { "set":{ "state":"recover" } },
                  {
                    "when":{ "_":[ "this", "giveXp" ] },
                    "execute":[
                      { "set":{ "xptogive":{ "_":[ "this", "heroLevel", "-", { "_":[ "that", "heroLevel" ] } ] } } },
                      {
                        "when":{ "_":[ "this", "xptogive", "isGreaterThan", 2 ] },
                        "execute":{
                          "times":{ "_":[ "this", "xptogive", "-", 1 ] },
                          "object":{ "set":{ "_":[ "stencil", "xpGem" ] }, "x":{ "_":[ "that", "x", "+", 8 ] }, "y":{ "_":[ "that", "y", "+", 16 ] } }
                        }
                      }
                    ]
                  },
                  { "when":{ "_":[ "this", "invulnerabilityOnHit" ] }, "set":{ "invulnerability":{ "_":[ "this", "invulnerabilityOnHit" ] } } }
                ]
              }
            ]
          }
        },
        {
          "name":"hitdone",
          "execute":{ "set":{ "forceX":{ "_":[ "this", "forceX", "*", -1 ] }, "forceY":{ "_":[ "this", "forceY", "*", -1 ] }, "state":"play" } }
        },
        { "name":"stun", "execute":[ { "object":{ "set":{ "_":[ "stencil", "largeSpark" ] } } }, { "set":{ "state":"recover" } } ] }
      ]
    },
    "joinLabel":{
      "type":"goldindicator",
      "width":152, "height":10,
      "zIndex":10,
      "visible":0,
      "font":"commodore", "fontSize":8, "lineHeight":10, "outline":"#000",
      "timer":0,
      "states":{
        "execute":{ "executeAction":"update" },
        "code":{
          "name":"Execute",
          "data":{
            "when":{ "_":[ "objectTyped", { "_":[ "this", "player" ] } ] },
            "set":{ "visible":0 },
            "elseExecute":{
              "when":{ "_":[ "this", "timer" ] },
              "subtract":1,
              "to":{ "_":[ "this", "timer" ] },
              "elseExecute":{ "set":{ "visible":{ "_":[ "this", "visible", "not" ] }, "timer":10 } }
            }
          }
        },
        "actions":{
          "name":"update",
          "execute":{
            "when":{ "_":[ "variable", "gold", "isLessThan", { "_":[ "variable", "goldForLife" ] } ] },
            "set":{ "html":"GET GOLD!" },
            "elseExecute":{ "set":{ "html":"PRESS FIRE!" } }
          }
        }
      }
    },
    "largeSpark":{
      "image":"sprites", "tileY":72, "width":16, "height":16,
      "zIndex":10000, "x":{ "_":[ "that", "x", "+", { "_":[ "randomNumber", [ 2, 6 ] ] } ] }, "y":{ "_":[ "that", "y", "+", { "_":[ "randomNumber", [ 6, 10 ] ] } ] },
      "animations":{ "spark":{ "frames":4, "speed":0 } },
      "animation":"spark",
      "states":{ "code":{ "name":"Sequence", "data":[ { "wait":4 }, { "remove":1 } ] } }
    },
    "resourceBlockModel":{
      "type":[ "wall", "breakable" ],
      "image":"tiles", "tileY":{ "_":[ "variable", "dungeonSkin" ] }, "width":16, "height":16,
      "zIndex":3,
      "states":{
        "actions":{
          "name":"hit",
          "execute":[
            { "as":{ "_":"scene" }, "set":{ "rumble":5 }, "playAudio":"break" },
            { "sum":1, "to":{ "_":[ "variable", "score" ] } },
            { "object":{ "_":[ "stencil", "spark" ] } },
            {
              "when":{ "_":[ "this", "spawns" ] },
              "execute":{
                "times":{ "_":[ "randomNumber", [ { "_":[ "this", "ratio", "/", 2, "floor" ] }, { "_":[ "this", "ratio" ] } ] ] },
                "object":{ "set":{ "_":[ "stencil", { "_":[ "randomValue", { "_":[ "that", "spawns" ] } ] } ] } }
              }
            },
            { "remove":1 }
          ]
        }
      }
    },
    "goldBlock":{ "set":{ "_":[ "stencil", "resourceBlockModel" ] }, "tileX":128, "ratio":{ "_":[ "variable", "goldSpawnRatio" ] }, "spawns":[ "goldGem" ] },
    "healthBlock":{ "set":{ "_":[ "stencil", "resourceBlockModel" ] }, "tileX":112, "ratio":{ "_":[ "variable", "hpSpawnRatio" ] }, "spawns":[ "healthGem" ] },
    "rockBlock":{ "set":{ "_":[ "stencil", "resourceBlockModel" ] }, "tileX":144, "spawns":0 },
    "smoke":{
      "image":"sprites", "tileY":96, "width":8, "height":8,
      "zIndex":{ "_":[ "that", "zIndex", "+", 1 ] }, "x":{ "_":[ "that", "x", "+", { "_":[ "randomNumber", [ 7, 9 ] ] } ] }, "y":{ "_":[ "that", "y", "+", 16 ] }, "frame":{ "_":[ "randomValue", [ 0, 2 ] ] },
      "forceY":-0.4,
      "states":{ "code":[ { "name":"Sequence", "data":[ { "wait":5 }, { "remove":1 } ] }, { "name":"Physics" } ] }
    },
    "spikesModel":{
      "type":"hazard",
      "image":"tiles", "width":16, "height":16,
      "zIndex":3,
      "buff":{ "_":[ "stencil", "dataNoBuff" ] },
      "states":{
        "name":"run",
        "code":{
          "name":"Execute",
          "data":[
            {
              "when":{ "_":[ "this", "timer" ] },
              "subtract":1,
              "to":{ "_":[ "this", "timer" ] },
              "elseExecute":[
                { "set":{ "up":{ "_":[ "this", "up", "not" ] } } },
                { "when":{ "_":[ "this", "up" ] }, "set":{ "timer":25 }, "elseExecute":{ "set":{ "timer":75 } }, "playAudio":"spike" }
              ]
            },
            {
              "when":{ "_":[ "this", "up" ] },
              "execute":[
                { "set":{ "frame":1 } },
                {
                  "when":{ "_":[ "this", "collidesWith", { "_":[ "object", "player" ] } ] },
                  "execute":[ { "set":{ "heroAttack":{ "_":[ "that", "heroHp", "/", 2, "ceil" ] } } }, { "as":{ "_":"that" }, "executeAction":"hit" } ]
                }
              ],
              "elseExecute":{ "set":{ "frame":0 } }
            }
          ]
        }
      }
    },
    "wall":{ "type":"wall", "image":"tiles", "tileX":48, "tileY":{ "_":[ "variable", "dungeonSkin" ] }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
  },
  "execute":[
    { "when":{ "_":[ "storage", "hiscore", "not" ] }, "as":{ "_":"storage" }, "set":{ "hiscore":0 } },
    { "as":{ "_":"variable" }, "set":{ "hiscore":{ "_":[ "storage", "hiscore" ] } } }
  ],
  "scenes":{
    "intro":{
      "states":{
        "execute":[
          {
            "as":{ "_":"variable" },
            "set":{
              "bgm":0,
              "bonusEvery":5,
              "buffDuration":250,
              "dungeonEnemyNests":1,
              "dungeonGenerator":{ "_":[ "randomNumber", [ 0, { "_":[ "stencil", "dataDungeonGenerators", "count", "-", 1 ] } ] ] },
              "dungeonHealthRatio":4,
              "dungeonResources":2,
              "dungeonSkin":16,
              "dungeonWalls":2,
              "ending":1,
              "enemiesCount":6,
              "enemyGrowthRatio":1.33,
              "enemyLevelHigh":1,
              "enemyLevelLow":1,
              "enemyRecoverTime":10,
              "gold":15,
              "goldForLife":5,
              "goldSpawnRatio":3,
              "hazards":0,
              "hazardsLevel":0,
              "hpSpawnRatio":3,
              "intensity":3,
              "keys":0,
              "luck":4,
              "nextCardTrend":1,
              "player1Health":0,
              "player1Joined":0,
              "player1Level":1,
              "player1Xp":0,
              "player2Health":0,
              "player2Joined":0,
              "player2Level":1,
              "player2Xp":0,
              "playerGrowthRatio":1.6,
              "score":0,
              "skipStages":1,
              "stage":0,
              "startCardTrend":-1,
              "timePerEnemy":125
            }
          },
          {
            "object":[
              { "width":320, "height":200, "x":0, "y":0, "bgcolor":"#a3e599" },
              {
                "image":"title", "width":276, "height":78,
                "zIndex":5, "x":22,
                "timer":0,
                "states":{
                  "code":{
                    "name":"Execute",
                    "data":[ { "sum":0.1, "to":{ "_":[ "this", "timer" ] } }, { "set":{ "y":{ "_":[ "this", "timer", "sin", "*", 5, "+", 20 ] } } } ]
                  }
                }
              },
              {
                "image":"title", "tileY":78, "width":146, "height":126,
                "zIndex":3, "x":87,
                "timer":0,
                "states":{
                  "code":{
                    "name":"Execute",
                    "data":[ { "subtract":0.1, "to":{ "_":[ "this", "timer" ] } }, { "set":{ "y":{ "_":[ "this", "timer", "sin", "*", 5, "+", 20 ] } } } ]
                  }
                }
              },
              {
                "type":"message",
                "width":320, "height":14,
                "zIndex":10, "x":0, "y":178,
                "bgcolor":"#000", "color":"#fff",
                "font":"commodore", "fontSize":8, "lineHeight":14, "textAlign":"center", "html":{ "_":[ "HI-SCORE: ", ".", { "_":[ "variable", "hiscore" ] } ] }
              },
              {
                "type":"message",
                "width":320, "height":14,
                "zIndex":10, "x":0, "y":160,
                "color":"#000",
                "font":"commodore", "fontSize":8, "lineHeight":14, "textAlign":"center", "html":"PRESS FIRE ON CONTROLLER 1 OR 2!",
                "states":{ "code":{ "name":"Sequence", "data":{ "set":{ "visible":{ "_":[ "this", "visible", "not" ] } }, "wait":10, "loop":1 } } }
              }
            ]
          }
        ],
        "code":{
          "name":"Execute",
          "data":{
            "when":{ "_":[ "keyA", "isHit" ] },
            "execute":{ "as":{ "_":"variable" }, "set":{ "player1Joined":1 }, "gotoScene":"stage", "withTransition":3, "playAudio":"levelup" },
            "elseExecute":{
              "when":{ "_":[ "keyA2", "isHit" ] },
              "execute":{ "as":{ "_":"variable" }, "set":{ "player2Joined":1 }, "gotoScene":"stage", "withTransition":3, "playAudio":"levelup" }
            }
          }
        }
      }
    },
    "credits":{
      "object":{ "width":320, "height":184, "x":0, "y":0, "bgcolor":"#79c1c8" },
      "execute":[
        { "set":{ "counter":0 } },
        {
          "times":20,
          "execute":[
            {
              "object":{
                "image":"tiles", "tileX":{ "_":[ "randomValue", [ 0, 16, 32 ] ] }, "tileY":32, "width":16, "height":16,
                "zIndex":10, "x":{ "_":[ "that", "counter" ] }, "y":184
              }
            },
            { "sum":16, "to":{ "_":[ "this", "counter" ] } }
          ]
        },
        {
          "when":{ "_":[ "variable", "player1Joined" ] },
          "object":{
            "image":"sprites", "width":24, "height":24,
            "zIndex":20, "x":-24, "y":168,
            "states":{
              "code":{
                "name":"Sequence",
                "data":[
                  {
                    "object":{ "_":[ "stencil", "smoke" ] },
                    "sum":2,
                    "to":{ "_":[ "this", "x" ] },
                    "set":{ "tileX":{ "_":[ "variable", "player1Level", "*", 24, "+", 216 ] } },
                    "playAudio":"spike",
                    "wait":1
                  },
                  { "sum":2, "to":{ "_":[ "this", "x" ] }, "wait":1 },
                  {
                    "object":{ "_":[ "stencil", "smoke" ] },
                    "sum":2,
                    "to":{ "_":[ "this", "x" ] },
                    "set":{ "tileX":{ "_":[ "variable", "player1Level", "*", 24, "-", 24 ] } },
                    "wait":1
                  },
                  { "sum":2, "to":{ "_":[ "this", "x" ] }, "wait":1 },
                  { "cycles":37, "loopTo":0 },
                  { "wait":25 },
                  { "set":{ "flipX":1 } },
                  { "wait":25 },
                  { "set":{ "tileX":{ "_":[ "variable", "player1Level", "*", 24, "+", 456 ] } }, "playAudio":"attack", "wait":25 },
                  { "set":{ "tileX":{ "_":[ "variable", "player1Level", "*", 24, "-", 24 ] } } },
                  { "wait":{ "_":[ "randomNumber", [ 150, 250 ] ] } },
                  { "set":{ "flipX":{ "_":[ "this", "flipX", "not" ] } }, "wait":10, "loop":1 }
                ]
              }
            }
          }
        },
        {
          "when":{ "_":[ "variable", "player2Joined" ] },
          "object":{
            "image":"sprites", "tileY":24, "width":24, "height":24,
            "zIndex":20, "x":-48, "y":168,
            "states":{
              "code":{
                "name":"Sequence",
                "data":[
                  {
                    "object":{ "_":[ "stencil", "smoke" ] },
                    "sum":2,
                    "to":{ "_":[ "this", "x" ] },
                    "set":{ "tileX":{ "_":[ "variable", "player2Level", "*", 24, "+", 216 ] } },
                    "playAudio":"spike",
                    "wait":1
                  },
                  { "sum":2, "to":{ "_":[ "this", "x" ] }, "wait":1 },
                  {
                    "object":{ "_":[ "stencil", "smoke" ] },
                    "sum":2,
                    "to":{ "_":[ "this", "x" ] },
                    "set":{ "tileX":{ "_":[ "variable", "player2Level", "*", 24, "-", 24 ] } },
                    "wait":1
                  },
                  { "sum":2, "to":{ "_":[ "this", "x" ] }, "wait":1 },
                  { "cycles":37, "loopTo":0 },
                  { "wait":25 },
                  { "set":{ "flipX":1 } },
                  { "wait":25 },
                  { "set":{ "tileX":{ "_":[ "variable", "player2Level", "*", 24, "+", 456 ] } }, "playAudio":"attack", "wait":25 },
                  { "set":{ "tileX":{ "_":[ "variable", "player2Level", "*", 24, "-", 24 ] } } },
                  { "wait":{ "_":[ "randomNumber", [ 150, 250 ] ] } },
                  { "set":{ "flipX":{ "_":[ "this", "flipX", "not" ] } }, "wait":10, "loop":1 }
                ]
              }
            }
          }
        }
      ],
      "states":{
        "code":{
          "name":"Sequence",
          "data":[
            { "wait":161 },
            { "sum":5000, "to":{ "_":[ "variable", "score" ] } },
            { "_":[ "stencil", "codeFinalizeScore" ] },
            {
              "object":[
                {
                  "type":"message",
                  "width":320, "height":14,
                  "zIndex":10006, "x":0, "y":58,
                  "bgcolor":"#000", "color":"#fff",
                  "font":"commodore", "fontSize":8, "lineHeight":14, "textAlign":"center", "html":"BONUS 5.000 pts!"
                },
                {
                  "type":"message",
                  "width":320, "height":60,
                  "zIndex":10010, "x":0, "y":70,
                  "font":"commodore", "fontSize":24, "lineHeight":60, "outline":"#000", "textAlign":"center", "html":"WELL DONE",
                  "states":{ "code":{ "name":"Sequence", "data":[ { "set":{ "color":"#c37b75" }, "wait":2 }, { "set":{ "color":"#8a7bce" }, "wait":2, "loopTo":0 } ] } }
                }
              ],
              "playAudio":"powerup"
            },
            { "wait":125 },
            { "as":{ "_":[ "object", "message" ] }, "remove":1 },
            { "wait":25 },
            {
              "object":{
                "width":320, "height":2000,
                "zIndex":5, "x":0, "y":200,
                "font":"commodore", "fontSize":8, "outline":"#000", "textAlign":"center", "html":"BUMPKING<br>(c) 2018<br>A tiny mash-up of games I love!<br><br><br>Graphics by:<br>KesieV Norimaki<br><br><br>Code by:<br>KesieV Norimaki<br><br><br>Music by:<br><br>Tea For The Seasick<br>by Dennis (Slimeball)<br><br>Raster Reagae<br>by Christof Muhlan<br><br>We Are Demo (Tune 3)<br>by Rune Gausdal<br><br><br>Big thanks to:<br>Bianca<br>Il Marsicano<br>The JTTA Team<br>Stefano \"Il Kusagari\" Fioretto<br>Romolo Camplani<br>Flavio Ricci<br>Rosalia Cottone<br>Giuseppe Cottone<br>All die-hard C64 fans<br>All Akihabara age friends<br><br><br><br><br><br><br><br><br><br><br>Thank you, Commodore 64.",
                "forceY":-0.5,
                "states":{ "code":{ "name":"Physics" } }
              },
              "playAudio":"ending"
            },
            {
              "subtract":1,
              "to":{ "_":[ "this", "cycles" ] },
              "wait":1, "loop":1,
              "until":{ "_":[ "keyA", "isHit", "or", { "_":[ "keyA2", "isHit" ] }, "or", { "_":[ "this", "cycles", "not" ] } ] }
            },
            { "gotoScene":"stage", "withTransition":3, "stopChannel":"music" }
          ]
        }
      },
      "cycles":2360
    },
    "stage":{
      "execute":[
        {
          "times":{ "_":[ "variable", "skipStages" ] },
          "execute":[
            {
              "when":{ "_":[ "variable", "nextCardTrend", "isLessThan", 1 ] },
              "set":{ "currentCardDeck":{ "_":[ "stencil", "dataDungeonCards", 1 ] } },
              "elseExecute":{ "set":{ "currentCardDeck":{ "_":[ "stencil", "dataDungeonCards", 0 ] } } }
            },
            { "set":{ "currentCard":{ "_":[ "randomValue", { "_":[ "this", "currentCardDeck", "cards" ] } ] } } },
            {
              "as":{ "_":"variable" },
              "set":{
                "dungeonGenerator":{ "_":[ "variable", "dungeonGenerator", "+", 1, "%", { "_":[ "stencil", "dataDungeonGenerators", "count" ] } ] },
                "dungeonSkin":{ "_":[ "variable", "stage", "/", 5, "floor", "%", 4, "+", 1, "*", 16 ] },                
                "nextCardTrend":{ "_":[ "variable", "startCardTrend" ] }
              }
            },
            { "sum":1, "to":{ "_":[ "variable", "stage" ] } },
            { "when":{ "_":[ "variable", "stage", "%", 2, "not" ] }, "sum":1,"to":{"_":["variable","enemyLevelHigh"]} },
            { "when":{ "_":[ "variable", "stage", "%", 3, "not" ] }, "execute":[
              { "sum":1, "to":{ "_":[ "variable", "enemyLevelLow" ] } },
              { "sum":1, "to":{ "_":[ "variable", "hazards" ] } }
            ] },
            { "when":{ "_":[ "variable", "stage", "%", 4, "not" ] }, "sum":1, "to":{ "_":[ "variable", "hazardsLevel" ] } },
            {
              "when":{ "_":[ "variable", "stage", "%", 5, "not" ] },
              "execute":[ { "sum":1, "to":{ "_":[ "variable", "intensity" ] } }, { "sum":1, "to":{ "_":[ "variable", "enemiesCount" ] } } ]
            },
            { "execute":{ "_":[ "this", "currentCard", "onDraw" ] } },
            { "_":[ "stencil", "codeTrimSettings" ] }
          ]
        },
        { "as":{ "_":"variable" }, "set":{ "skipStages":1 } },
        {
          "set":{
            "bgm":{ "_":[ "bgm", ".", { "_":[ "variable", "stage", "-", 1, "/", 10, "floor", "%", 2 ] } ] },
            "enemiesCount":{ "_":[ "variable", "enemiesCount" ] }
          }
        },
        {
          "when":{ "_":[ "this", "bgm", "isNotEqualTo", { "_":[ "variable", "bgm" ] } ] },
          "execute":[ { "as":{ "_":"variable" }, "set":{ "bgm":{ "_":[ "that", "bgm" ] } } }, { "playAudio":{ "_":[ "variable", "bgm" ] }, "stopChannel":"music" } ]
        },
        { "_":[ "stencil", "codeResetTimer" ] },
        { "set":{ "counter":0, "counter2":1 } },
        {
          "times":273,
          "execute":[
            { "set":{ "tx":{ "_":[ "that", "counter", "%", 21 ] }, "ty":{ "_":[ "that", "counter", "/", 21, "floor" ] } } },
            {
              "object":{
                "type":[ "slot", { "_":[ "slot-", ".", { "_":[ "that", "tx" ] }, ".", "-", ".", { "_":[ "that", "ty" ] } ] } ],
                "image":"tiles", "tileX":{ "_":[ "randomValue", [ 0, 16, 32 ] ] }, "tileY":{ "_":[ "variable", "dungeonSkin" ] }, "width":16, "height":16,
                "zIndex":1, "x":{ "_":[ "that", "tx", "*", 16, "-", 8 ] }, "y":{ "_":[ "that", "ty", "*", 16, "-", 8 ] },
                "execute":{
                  "when":{
                    "_":[
                      "that",
                      "counter",
                      "isLessThan",
                      21,
                      "or",
                      { "_":[ "that", "counter", "isGreaterThan", 251 ] },
                      "or",
                      { "_":[ "that", "counter", "+", 1, "%", 21, "isLessThan", 2 ] }
                    ]
                  },
                  "set":{ "_":[ "stencil", "wall" ] },
                  "elseExecute":[
                    { "when":{ "_":[ "that", "tx", "%", 2, "and", { "_":[ "that", "ty", "%", 2 ] } ] }, "set":{ "type":"wallslot" } },
                    {
                      "when":{ "_":[ "that", "tx", "isLessThan", 10 ] },
                      "set":{ "typeMirrorX":{ "_":[ "slot-", ".", { "_":[ 20, "-", { "_":[ "that", "tx" ] } ] }, ".", "-", ".", { "_":[ "that", "ty" ] } ] } }
                    },
                    {
                      "when":{ "_":[ "that", "ty", "isLessThan", 6 ] },
                      "set":{ "typeMirrorY":{ "_":[ "slot-", ".", { "_":[ "that", "tx" ] }, ".", "-", ".", { "_":[ 12, "-", { "_":[ "that", "ty" ] } ] } ] } }
                    },
                    {
                      "when":{ "_":[ "that", "tx", "isLessThan", 10, "and", { "_":[ "that", "ty", "isLessThan", 6 ] } ] },
                      "set":{
                        "type":"withmirrorxy",
                        "typeMirrorXY":{ "_":[ "slot-", ".", { "_":[ 20, "-", { "_":[ "that", "tx" ] } ] }, ".", "-", ".", { "_":[ 12, "-", { "_":[ "that", "ty" ] } ] } ] }
                      }
                    }
                  ]
                },
                "tX":{ "_":[ "that", "tx" ] },
                "ty":{ "_":[ "that", "ty" ] }
              }
            },
            { "sum":1, "to":{ "_":[ "this", "counter" ] } }
          ]
        },
        {
          "as":{ "_":[ "randomObject", { "_":[ "object", "withmirrorxy" ] } ] },
          "execute":[
            { "set":{ "type":"player1spawn", "tileX":80 }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } },
            {
              "as":{ "_":[ "objectTyped", { "_":[ "this", "typeMirrorXY" ] } ] },
              "execute":{ "set":{ "type":"player2spawn", "tileX":96 }, "execute":{ "_":[ "stencil", "codeDisableSlot" ] } }
            }
          ]
        },
        { "_":[ "stencil", "dataDungeonGenerators", { "_":[ "variable", "dungeonGenerator" ] } ] }
      ],
      "nextStageTimer":0,
      "playing":1,
      "rumble":0,
      "states":[
        {
          "execute":{
            "object":[
              {
                "type":[ "message", "stagelabel" ],
                "width":320, "height":40,
                "zIndex":10010, "x":0, "y":-100,
                "bgcolor":"#000", "color":"#fff",
                "font":"commodore", "fontSize":16, "lineHeight":40, "textAlign":"center", "html":{ "_":[ "STAGE ", ".", { "_":[ "variable", "stage" ] } ] },
                "gap":120,
                "states":{
                  "code":{
                    "name":"Sequence",
                    "data":[
                      { "set":{ "y":{ "_":[ 80, "-", { "_":[ "this", "gap" ] } ] } } },
                      { "set":{ "gap":{ "_":[ "this", "gap", "*", 0.75 ] } } },
                      { "wait":1, "cycles":30, "loopTo":0 }
                    ]
                  }
                }
              },
              {
                "type":"message",
                "image":"sprites", "tileX":{ "_":[ "scene", "currentCardDeck", "card", "tileX" ] }, "tileY":120, "width":80, "height":113,
                "zIndex":10009, "x":120, "y":200,
                "gap":43,
                "states":{
                  "code":{
                    "name":"Sequence",
                    "data":[
                      { "set":{ "y":{ "_":[ 43, "+", { "_":[ "this", "gap" ] } ] } } },
                      { "set":{ "gap":{ "_":[ "this", "gap", "*", 0.75 ] } } },
                      { "wait":1, "cycles":30, "loopTo":0 },
                      { "set":{ "gap":17 }, "playAudio":"dash" },
                      { "sum":{ "_":[ "this", "gap" ] }, "to":{ "_":[ "this", "y" ] } },
                      { "when":{ "_":[ "this", "gap", "isLessThan", -11 ] }, "sum":{ "_":[ "this", "gap" ] }, "to":{ "_":[ "objectTyped", "stagelabel", "y" ] } },
                      {
                        "when":{ "_":[ "this", "gap", "not" ] },
                        "object":{
                          "width":64, "height":24,
                          "x":8, "y":48,
                          "color":"#000",
                          "font":"commodore", "fontSize":8, "lineHeight":8, "textAlign":"center", "html":{ "_":[ "scene", "currentCard", "label" ] }
                        },
                        "into":{ "_":"this" }
                      },
                      { "subtract":1, "to":{ "_":[ "this", "gap" ] } },
                      { "wait":1, "cycles":34, "loopTo":-4 },
                      { "playAudio":{ "_":[ "scene", "currentCardDeck", "card", "sound" ] } },
                      { "set":{ "visible":{ "_":[ "this", "visible", "not" ] } }, "wait":1, "loop":1, "cycles":10 },
                      { "wait":50 },
                      {
                        "when":{ "_":[ "variable", "player1Joined" ] },
                        "set":{ "joinPlayer":"player1", "joinPlayerHp":{ "_":[ "variable", "player1Health" ] }, "joinPlayerXp":{ "_":[ "variable", "player1Xp" ] } },
                        "execute":{ "_":[ "stencil", "codeJoinPlayer" ] }
                      },
                      {
                        "when":{ "_":[ "variable", "player2Joined" ] },
                        "set":{ "joinPlayer":"player2", "joinPlayerHp":{ "_":[ "variable", "player2Health" ] }, "joinPlayerXp":{ "_":[ "variable", "player2Xp" ] } },
                        "execute":{ "_":[ "stencil", "codeJoinPlayer" ] }
                      },
                      { "as":{ "_":[ "object", "hazard" ] }, "set":{ "state":"run" } },
                      {
                        "object":[
                          {
                            "image":"sprites", "tileY":104, "width":16, "height":16,
                            "zIndex":100000, "x":0, "y":184,
                            "states":{
                              "code":{
                                "name":"Execute",
                                "data":[
                                  {
                                    "set":{ "frame":{ "_":[ "objectTyped", "player1", "buff", "frame" ] }, "visible":1, "bgcolor":{ "_":[ "objectTyped", "player1", "buff", "bgcolor" ] } }
                                  },
                                  {
                                    "when":{ "_":[ "objectTyped", "player1", "buffTimer", "and", { "_":[ "objectTyped", "player1", "buffTimer", "isLessThan", 25 ] } ] },
                                    "set":{ "visible":{ "_":[ "objectTyped", "player1", "buffTimer", "%", 2 ] } }
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "type":"hud",
                            "hudType":"label", "label":"LV%number|variable.player1Level|0|2% XP%number|objectTyped.player1.heroXp|0|2%/%number|objectTyped.player1.heroNextXP|0|2%",
                            "width":152, "height":10,
                            "zIndex":100000, "x":16, "y":186,
                            "color":"#c37b75",
                            "font":"commodore", "fontSize":8, "lineHeight":10, "outline":"#000",
                            "states":{ "code":{ "name":"Execute", "data":{ "set":{ "visible":{ "_":[ "objectTyped", "player1" ] } } } } }
                          },
                          { "set":{ "_":[ "stencil", "joinLabel" ] }, "x":16, "y":186, "color":"#c37b75", "player":"player1" },
                          { "width":97, "height":4, "zIndex":100000, "x":17, "y":194, "bgcolor":"#000" },
                          {
                            "height":2,
                            "zIndex":100001, "x":18, "y":195,
                            "bgcolor":"#c37b75",
                            "states":{
                              "code":{
                                "name":"Execute",
                                "data":{ "set":{ "width":{ "_":[ "objectTyped", "player1", "heroHp", "/", { "_":[ "objectTyped", "player1", "heroMaxHp" ] }, "*", 95 ] } } }
                              }
                            }
                          },
                          {
                            "image":"sprites", "tileY":104, "width":16, "height":16,
                            "zIndex":100000, "x":200, "y":184,
                            "states":{
                              "code":{
                                "name":"Execute",
                                "data":[
                                  {
                                    "set":{ "frame":{ "_":[ "objectTyped", "player2", "buff", "frame" ] }, "visible":1, "bgcolor":{ "_":[ "objectTyped", "player2", "buff", "bgcolor" ] } }
                                  },
                                  {
                                    "when":{ "_":[ "objectTyped", "player2", "buffTimer", "and", { "_":[ "objectTyped", "player2", "buffTimer", "isLessThan", 25 ] } ] },
                                    "set":{ "visible":{ "_":[ "objectTyped", "player2", "buffTimer", "%", 2 ] } }
                                  }
                                ]
                              }
                            }
                          },
                          {
                            "type":"hud",
                            "hudType":"label", "label":"LV%number|variable.player2Level|0|2% XP%number|objectTyped.player2.heroXp|0|2%/%number|objectTyped.player2.heroNextXP|0|2%",
                            "width":152, "height":10,
                            "zIndex":100000, "x":216, "y":186,
                            "color":"#79c1c8",
                            "font":"commodore", "fontSize":8, "lineHeight":10, "outline":"#000",
                            "states":{ "code":{ "name":"Execute", "data":{ "set":{ "visible":{ "_":[ "objectTyped", "player2" ] } } } } }
                          },
                          { "set":{ "_":[ "stencil", "joinLabel" ] }, "x":216, "y":186, "color":"#79c1c8", "player":"player2" },
                          { "width":97, "height":4, "zIndex":100000, "x":217, "y":194, "bgcolor":"#000" },
                          {
                            "height":2,
                            "zIndex":100001, "x":218, "y":195,
                            "bgcolor":"#c9d684",
                            "states":{
                              "code":{
                                "name":"Execute",
                                "data":{ "set":{ "width":{ "_":[ "objectTyped", "player2", "heroHp", "/", { "_":[ "objectTyped", "player2", "heroMaxHp" ] }, "*", 95 ] } } }
                              }
                            }
                          },
                          {
                            "type":"hud",
                            "hudType":"label", "label":"%number|variable.score|0|9%",
                            "width":106, "height":10,
                            "zIndex":100000, "x":107, "y":183,
                            "color":"#fff",
                            "font":"commodore", "fontSize":8, "lineHeight":10, "outline":"#000", "textAlign":"center"
                          },
                          {
                            "type":"hud",
                            "hudType":"label", "label":"%number|variable.gold|0|4%/%number|variable.goldForLife|0|4%",
                            "width":106, "height":10,
                            "zIndex":100000, "x":107, "y":191,
                            "color":"#c9d684",
                            "font":"commodore", "fontSize":8, "lineHeight":10, "outline":"#000", "textAlign":"center"
                          },
                          {
                            "width":100, "height":10,
                            "zIndex":100000, "x":8, "y":0,
                            "color":"#c9d684",
                            "font":"commodore", "fontSize":8, "lineHeight":10, "outline":"#000", "html":"FOES"
                          },
                          { "width":264, "height":4, "zIndex":100000, "x":48, "y":2, "bgcolor":"#000" },
                          {
                            "height":2,
                            "zIndex":100001, "x":49, "y":3,
                            "bgcolor":"#c9d684",
                            "states":{
                              "code":{ "name":"Execute", "data":{ "set":{ "width":{ "_":[ "scene", "enemiesCount", "/", { "_":[ "variable", "enemiesCount" ] }, "*", 262 ] } } } }
                            }
                          }
                        ]
                      },
                      { "as":{ "_":"scene" }, "set":{ "state":"play" } }
                    ]
                  }
                }
              }
            ],
            "playAudio":"dash"
          }
        },
        {
          "name":"play",
          "set":{ "endtimer":0, "spawnTimer":25 },
          "execute":{ "as":{ "_":[ "object", "message" ] }, "remove":1 },
          "code":{
            "name":"Execute",
            "data":[
              { "_":[ "stencil", "codeHandleJoin" ] },
              { "_":[ "stencil", "codeRumble" ] },
              { "when":{ "_":[ "this", "joined", "not" ] }, "sum":1, "to":{ "_":[ "this", "endtimer" ] }, "elseExecute":{ "set":{ "endtimer":0 } } },
              {
                "when":{ "_":[ "this", "endtimer", "isGreaterThan", 50 ] },
                "execute":{
                  "when":{ "_":[ "variable", "gold", "isGreaterEqualThan", { "_":[ "variable", "goldForLife" ] } ] },
                  "set":{ "state":"continue" },
                  "elseExecute":{ "set":{ "state":"gameover" } }
                }
              },
              {
                "when":{ "_":[ "this", "playing" ] },
                "execute":{
                  "when":{ "_":[ "this", "timeLeft" ] },
                  "execute":[
                    { "subtract":1, "to":{ "_":[ "this", "timeLeft" ] } },
                    {
                      "when":{ "_":[ "this", "timeLeft", "isEqualTo", 250 ] },
                      "object":{
                        "type":"message",
                        "width":320, "height":60,
                        "zIndex":10010, "x":0, "y":70,
                        "color":"#fff",
                        "font":"commodore", "fontSize":16, "lineHeight":60, "outline":"#000", "textAlign":"center", "html":"HURRY UP!",
                        "states":{
                          "code":{
                            "name":"Sequence",
                            "data":[ { "set":{ "visible":1 }, "playAudio":"hurryup", "wait":5 }, { "set":{ "visible":0 }, "wait":5, "cycles":3, "loopTo":0 }, { "remove":1 } ]
                          }
                        }
                      }
                    }
                  ],
                  "elseExecute":[
                    {
                      "when":{ "_":[ "objectTyped", "player1" ] },
                      "execute":{
                        "when":{ "_":[ "objectTyped", "killerplayer1", "not" ] },
                        "object":{ "type":"killerplayer1", "set":{ "_":[ "stencil", "bumpKing" ] }, "player":"player1" }
                      }
                    },
                    {
                      "when":{ "_":[ "objectTyped", "player2" ] },
                      "execute":{
                        "when":{ "_":[ "objectTyped", "killerplayer2", "not" ] },
                        "object":{ "type":"killerplayer2", "set":{ "_":[ "stencil", "bumpKing" ] }, "player":"player2" }
                      }
                    }
                  ]
                }
              },
              {
                "when":{ "_":[ "this", "enemiesCount" ] },
                "execute":{
                  "when":{ "_":[ "this", "spawnTimer" ] },
                  "subtract":1,
                  "to":{ "_":[ "this", "spawnTimer" ] },
                  "elseExecute":[
                    { "set":{ "spawnTimer":25 } },
                    {
                      "when":{ "_":[ "object", "enemy", "count", "isLessThan", { "_":[ "variable", "intensity" ] } ] },
                      "execute":[
                        {
                          "as":{ "_":[ "randomObject", { "_":[ "object", "enemyNest" ] } ] },
                          "execute":[
                            { "set":{ "enemyLevel":{ "_":[ "randomNumber", [ { "_":[ "variable", "enemyLevelLow" ] }, { "_":[ "variable", "enemyLevelHigh" ] } ] ] } } },
                            {
                              "object":{
                                "set":{ "_":[ "stencil", "enemy" ] },
                                "x":{ "_":[ "that", "x", "-", 4 ] }, "y":{ "_":[ "that", "y", "-", 12 ] },
                                "buff":{ "_":[ "stencil", "dataEnemyBuff", { "_":[ "that", "enemyLevel" ] }, "or", { "_":[ "stencil", "dataNoBuff" ] } ] },
                                "heroLevel":{ "_":[ "that", "enemyLevel" ] },
                                "recoverTime":{
                                  "_":[ "variable", "enemyRecoverTime", "-", { "_":[ "that", "enemyLevel", "%", 3, "*", 0.3, "*", { "_":[ "variable", "enemyRecoverTime" ] } ] }, "ceil" ]
                                }
                              }
                            }
                          ]
                        },
                        { "subtract":1, "to":{ "_":[ "scene", "enemiesCount" ] } },
                        { "when":{ "_":[ "scene", "enemiesCount", "%", { "_":[ "variable", "bonusEvery" ] }, "not" ] }, "execute":{ "_":[ "stencil", "codeSpawnBonus" ] } }
                      ]
                    }
                  ]
                },
                "elseExecute":{
                  "when":{ "_":[ "objectTyped", "enemy", "not" ] },
                  "execute":[
                    {
                      "when":{ "_":[ "this", "nextStageTimer" ] },
                      "execute":{ "when":{ "_":[ "this", "nextStageTimer", "isGreaterThan", 125 ] }, "set":{ "state":"nextstage" } },
                      "elseExecute":[
                        { "as":{ "_":[ "object", "killer" ] }, "execute":{ "object":{ "_":[ "stencil", "spark" ] }, "remove":1 } },
                        { "set":{ "playing":0 } },
                        {
                          "object":{
                            "type":"message",
                            "width":320, "height":60,
                            "zIndex":10010, "x":0, "y":70,
                            "font":"commodore", "fontSize":16, "lineHeight":60, "outline":"#000", "textAlign":"center", "html":"STAGE CLEAR!",
                            "states":{
                              "code":{
                                "name":"Sequence",
                                "data":[ { "set":{ "color":"#fff" }, "wait":2 }, { "set":{ "color":"#c9d684" }, "wait":2, "cycles":10, "loopTo":0 }, { "remove":1 } ]
                              }
                            }
                          },
                          "playAudio":"powerup"
                        }
                      ]
                    },
                    { "sum":1, "to":{ "_":[ "this", "nextStageTimer" ] } }
                  ]
                }
              }
            ]
          }
        },
        {
          "name":"gameover",
          "execute":[
            { "as":{ "_":[ "object", "message" ] }, "remove":1 },
            { "_":[ "stencil", "codeFinalizeScore" ] },
            {
              "object":{
                "type":"message",
                "width":320, "height":60,
                "zIndex":10010, "x":0, "y":70,
                "font":"commodore", "fontSize":24, "lineHeight":60, "outline":"#000", "textAlign":"center", "html":"GAME OVER",
                "states":{ "code":{ "name":"Sequence", "data":[ { "set":{ "color":"#c37b75" }, "wait":2 }, { "set":{ "color":"#8a7bce" }, "wait":2, "loopTo":0 } ] } }
              },
              "playAudio":"dead",
              "stopChannel":"music"
            }
          ],
          "code":[
            { "name":"Execute", "data":{ "_":[ "stencil", "codeRumble" ] } },
            {
              "name":"Sequence",
              "data":[
                { "wait":25 },
                { "wait":1, "loop":1, "until":{ "_":[ "keyA", "isHit", "or", { "_":[ "keyA2", "isHit" ] } ] } },
                { "gotoScene":"intro", "withTransition":3 }
              ]
            }
          ]
        },
        {
          "name":"continue",
          "set":{ "secondTimer":0, "timer":11 },
          "execute":[
            { "as":{ "_":[ "object", "message" ] }, "remove":1 },
            {
              "object":{
                "type":[ "hud", "message" ],
                "hudType":"label", "label":"CONTINUE?<br>%number|scene.timer%",
                "width":320, "height":60,
                "zIndex":10010, "x":0, "y":70,
                "color":"#fff",
                "font":"commodore", "fontSize":24, "lineHeight":30, "outline":"#000", "textAlign":"center",
                "states":{
                  "code":{
                    "name":"Sequence",
                    "data":[
                      { "set":{ "color":"#c9d684" }, "wait":{ "_":[ "scene", "timer", "+", 2 ] } },
                      { "set":{ "color":"#fff" }, "wait":{ "_":[ "scene", "timer", "+", 2 ] }, "loopTo":0 }
                    ]
                  }
                }
              }
            }
          ],
          "code":{
            "name":"Execute",
            "data":[
              { "_":[ "stencil", "codeRumble" ] },
              {
                "when":{ "_":[ "this", "secondTimer" ] },
                "subtract":1,
                "to":{ "_":[ "this", "secondTimer" ] },
                "elseExecute":{
                  "when":{ "_":[ "this", "timer" ] },
                  "subtract":1,
                  "to":{ "_":[ "this", "timer" ] },
                  "set":{ "secondTimer":25 },
                  "elseExecute":{ "set":{ "state":"gameover" } },
                  "playAudio":"time"
                }
              },
              { "_":[ "stencil", "codeHandleJoin" ] },
              { "when":{ "_":[ "this", "joined" ] }, "set":{ "state":"play" } }
            ]
          }
        },
        {
          "name":"nextstage",
          "execute":{
            "as":{ "_":"variable" },
            "execute":[
              {
                "when":{ "_":[ "objectTyped", "player1" ] },
                "execute":{
                  "set":{ "player1Health":{ "_":[ "objectTyped", "player1", "heroHp" ] }, "player1Joined":1, "player1Xp":{ "_":[ "objectTyped", "player1", "heroXp" ] } }
                },
                "elseExecute":{ "set":{ "player1Joined":0 } }
              },
              {
                "when":{ "_":[ "objectTyped", "player2" ] },
                "execute":{
                  "set":{ "player2Health":{ "_":[ "objectTyped", "player2", "heroHp" ] }, "player2Joined":1, "player2Xp":{ "_":[ "objectTyped", "player2", "heroXp" ] } }
                },
                "elseExecute":{ "set":{ "player2Joined":0 } }
              },
              {
                "when":{ "_":[ "variable", "ending" ] },
                "execute":{
                  "when":{ "_":[ "variable", "stage", "+", { "_":[ "variable", "skipStages" ] }, "isGreaterThan", 20 ] },
                  "as":{ "_":"variable" },
                  "set":{ "bgm":0, "ending":0 },
                  "gotoScene":"credits",
                  "withTransition":3,
                  "elseExecute":{ "gotoScene":"stage", "withTransition":3 },
                  "stopChannel":"music"
                },
                "elseExecute":{ "gotoScene":"stage", "withTransition":3 }
              }
            ]
          }
        }
      ]
    }
  }
}